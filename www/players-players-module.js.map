{"version":3,"sources":["./src/app/pages/home/players/players.page.html","./src/app/pages/home/players/players-routing.module.ts","./src/app/pages/home/players/players.module.ts","./src/app/pages/home/players/players.page.scss","./src/app/pages/home/players/players.page.ts"],"names":[],"mappings":"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","file":"players-players-module.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>players</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"load($event)\\\">\\n    <ion-refresher-content></ion-refresher-content>\\n  </ion-refresher>\\n\\n  <ion-searchbar \\n    placeholder=\\\"Buscar jugador\\\"   \\n    (keyup)=\\\"searchPlayer($event)\\\" \\n    debounce=\\\"500\\\"\\n    (ionClear)=\\\"cancelSearch($event)\\\"\\n  ></ion-searchbar>\\n\\n\\n  <app-player-list \\n    [items] = \\\"players\\\"\\n    (eventSelect)=\\\"playerSelect($event)\\\" \\n    [firstLoading] = \\\"firstLoading\\\"\\n  >\\n  </app-player-list>\\n\\n  <ion-infinite-scroll threshold=\\\"100px\\\" (ionInfinite)=\\\"loadData($event)\\\">\\n    <ion-infinite-scroll-content\\n      loadingSpinner=\\\"bubbles\\\"\\n      loadingText=\\\"\\\">\\n    </ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PlayersPage } from './players.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PlayersPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PlayersPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PlayersPageRoutingModule } from './players-routing.module';\n\nimport { PlayersPage } from './players.page';\nimport {ComponentsModule} from '../../../components/components.module'\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PlayersPageRoutingModule,\n    ComponentsModule\n  ],\n  declarations: [PlayersPage]\n})\nexport class PlayersPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2hvbWUvcGxheWVycy9wbGF5ZXJzLnBhZ2Uuc2NzcyJ9 */\";","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { Model } from 'src/app/api/models/model';\nimport { RequestService } from 'src/app/api/request.service';\nimport { NavController, IonInfiniteScroll } from '@ionic/angular';\nimport { UtilService } from 'src/app/services/util.service';\n\n@Component({\n  selector: 'app-players',\n  templateUrl: './players.page.html',\n  styleUrls: ['./players.page.scss'],\n})\nexport class PlayersPage implements OnInit {\n\n  @ViewChild(IonInfiniteScroll) infiniteScroll: IonInfiniteScroll;\n\n\n  playerModel : Model\n  players = []\n  firstLoading = true;\n  oldPlayers = [];\n  dataPaginate : any;\n\n  constructor(\n    public request : RequestService,\n    public navCtrl : NavController,\n    public util : UtilService\n\n  ) {\n    this.playerModel = new Model('Player',this.request);\n  }\n\n  ngOnInit() {\n    this.load()\n  }\n\n  load($event = null,paginate = false){\n\n    let page = {};\n    \n    if(paginate && this.dataPaginate ){\n      page = {\n        page : this.dataPaginate.current_page + 1\n      }\n    }\n\n    //await this.util.delay(4000)\n    this.playerModel.api_function('pageHomePlayers',page).subscribe(\n      response => {\n        if(response['status'] == 'success'){\n          this.dataPaginate = response['data'];\n          if(!paginate){\n            this.players = response['data']['data']\n          }else{\n\n            for(let player of response['data']['data']){\n              this.players.push(player);\n            }\n            \n          }\n        }\n        this.oldPlayers = [... this.players]\n        console.log(response)\n        this.firstLoading = false;\n        if($event)\n          $event.target.complete();\n      },\n      error => {\n        this.firstLoading= false;\n        console.error(error)\n        if($event)\n          $event.target.complete();\n      }\n    )\n  }\n\n  loadData(event) {\n    if(this.dataPaginate &&  this.dataPaginate.last_page == this.dataPaginate.current_page){\n      event.target.complete();\n      event.target.disabled = true;\n      this.infiniteScroll.disabled = !this.infiniteScroll.disabled;\n      return;\n    }\n\n    this.load(event,true);\n  }\n\n\n  playerSelect(player){\n    console.log('goTo',player)\n    this.navCtrl.navigateForward(`player/profile/${player.id}`);\n  \n }\n\n async searchPlayer(event){\n\n  console.log('text search',event)\n  let text = event.target.value;\n  if(text.length <= 2){\n    this.players = this.oldPlayers;\n    return;\n  }\n\n  this.firstLoading = true;\n \n  //await this.util.delay(4000);\n\n  this.playerModel.api_function('searchPlayer',{query : text }).subscribe(\n     response => {\n       console.log(response);\n       if(response['status'] == 'success'){\n         this.players = response['data'];\n         event.target.autofocus = true;\n       }\n       this.firstLoading = false;\n     },\n     error =>{\n       console.error(error);\n       this.firstLoading = false;\n     }\n   )\n }\n\n cancelSearch(event){\n   this.players = this.oldPlayers;\n }\n\n\n}\n"],"sourceRoot":"webpack:///"}