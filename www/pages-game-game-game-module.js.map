{"version":3,"sources":["./src/app/pages/game/game/game.page.html","./src/app/pages/game/game/game-routing.module.ts","./src/app/pages/game/game/game.module.ts","./src/app/pages/game/game/game.page.scss","./src/app/pages/game/game/game.page.ts"],"names":[],"mappings":"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","file":"pages-game-game-game-module.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>Partido</ion-title>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/home/games\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-buttons slot=\\\"secondary\\\" >\\n\\n      <ion-button routerLink=\\\"/export/{{id}}\\\" routerDirection=\\\"forward\\\" >\\n        <ion-icon name=\\\"share-social-outline\\\"></ion-icon>\\n      </ion-button>\\n      \\n      <!-- <ion-button (click)=\\\"shareService.shareGameFacebook(id)\\\" style=\\\"background: #4267B2      \\\">\\n        <ion-icon name=\\\"share-social-outline\\\"></ion-icon>\\n        <ion-icon name=\\\"logo-facebook\\\"></ion-icon>\\n      </ion-button> -->\\n      \\n      <ion-button (click)=\\\"confirmDelete()\\\" *ngIf=\\\"isAdminTeam\\\">\\n        <ion-icon name=\\\"trash-outline\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  \\n  <div class=\\\"game\\\" *ngIf=\\\"game\\\" >\\n    \\n    \\n    <app-game-list\\n      [game] = \\\"game\\\">\\n    </app-game-list>\\n\\n    <div class=\\\"ion-text-center\\\" *ngIf=\\\"game.status == 'Pendiente' && isFinish() && isAdminTeam\\\">\\n      <ion-button (click)=\\\"addResult()\\\">Añadir resultado</ion-button>\\n    </div>\\n\\n\\n    <div class=\\\"ion-text-center\\\">\\n      <ion-badge color=\\\"tertiary\\\">{{game.status}}</ion-badge>\\n    </div>\\n   \\n\\n    <ion-card *ngIf=\\\"game.location\\\">\\n      <ion-card-header>\\n        <ion-card-subtitle>Ubicación</ion-card-subtitle>\\n        <ion-card-title>{{game.location}}</ion-card-title>\\n      </ion-card-header>\\n    </ion-card>\\n\\n    <div *ngIf=\\\"game && game.field_id\\\">\\n      <div class=\\\"ub\\\">\\n        Ubicación\\n      </div>\\n        <app-show-map\\n          [field]=\\\"game.field\\\"\\n          [showDirection]=\\\"true\\\"\\n        ></app-show-map>\\n    </div>\\n\\n    <app-old-next-game\\n      [game]=\\\"game.oldGame\\\"\\n    ></app-old-next-game>\\n   \\n   \\n    <app-comments\\n      [idRelation]=\\\"id\\\"\\n      [nameRelationModel]=\\\"'Game'\\\"\\n    ></app-comments>\\n\\n  </div>\\n\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { GamePage } from './game.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: GamePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class GamePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { GamePageRoutingModule } from './game-routing.module';\n\nimport { GamePage } from './game.page';\nimport {ComponentsModule} from '../../../components/components.module'\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    GamePageRoutingModule,\n    ComponentsModule\n  ],\n  declarations: [GamePage]\n})\nexport class GamePageModule {}\n","export default \".ub {\\n  margin: 5px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvZ2FtZS9nYW1lL2dhbWUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksV0FBQTtBQUNKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvZ2FtZS9nYW1lL2dhbWUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnVie1xuICAgIG1hcmdpbjogNXB4O1xufSJdfQ== */\";","import { Component, OnInit } from '@angular/core';\n\nimport { ActivatedRouteSnapshot, ActivatedRoute, Router } from '@angular/router';\nimport { Model } from 'src/app/api/models/model';\nimport { RequestService } from 'src/app/api/request.service';\nimport { UtilService } from 'src/app/services/util.service';\nimport { DialogService } from 'src/app/api/util/dialog.service';\nimport { ModalController, NavController } from '@ionic/angular';\nimport { AddResultPage } from '../add-result/add-result.page';\nimport * as moment from 'moment';\nimport { ListsHomeService } from 'src/app/services/lists-home.service';\nimport { AuthUserService } from 'src/app/services/auth-user.service';\nimport { SharerService } from 'src/app/services/sharer.service';\nimport { ScreenLoadingService } from 'src/app/services/screen-loading.service';\n\n \n\n\n\n@Component({\n  selector: 'app-game',\n  templateUrl: './game.page.html',\n  styleUrls: ['./game.page.scss','../../home/games/games.page.scss'],\n})\nexport class GamePage implements OnInit {\n\n  public id : any;\n  public gameModel : Model;\n  public game : any ;\n  private firstLoading = true;\n\n\n  constructor(\n    public route : ActivatedRoute,\n    public requesService : RequestService,\n    public util : UtilService,\n    public dialogService : DialogService, \n    public modalController : ModalController,\n    private router : Router,\n    public navCtrl : NavController,\n    public listsHomeService : ListsHomeService,\n    public authUser : AuthUserService,\n    public shareService : SharerService,\n    public loading : ScreenLoadingService\n\n  ) {\n    this.id = this.route.snapshot.paramMap.get('id');\n    this.gameModel = new Model('Game',requesService);\n\n   }\n\n  ngOnInit() {\n    this.init();\n    this.analyzeParameters();\n  }\n\n  async init(event = null){\n\n    if(this.firstLoading){\n      this.loading.start();\n      //await this.dialogService.loadingProgres();\n      this.firstLoading = false;\n    }\n    this.gameModel.api_functionModel(this.id,'dataProfile').subscribe(data => {\n      if(data['status'] == 'success')\n        this.game = data['data'];\n      //console.log('Game',this.game);\n      this.isFinish();\n      if(event)\n        event.target.complete();\n      //this.dialogService.dimissLoaging();\n      this.loading.end();\n    },\n    error =>{\n      //this.dialogService.dimissLoaging(); \n      this.loading.end();\n    })\n  }\n\n  async addResult(){\n    const modal = await this.modalController.create({\n      component: AddResultPage,\n      componentProps : {\n        game : this.game\n      }\n    })\n\n    modal.onDidDismiss().then(data => {\n      if(data.data['game']){\n        this.game = this.game;\n        this.listsHomeService.remove('games',this.game.id);\n        this.router.navigateByUrl('results/profile/' + this.game.id)\n      }\n    })\n\n\n    await modal.present();\n  }\n\n\n  isFinish(){\n    let dateString = `${this.game.date} ${this.game.time}`;\n    \n    let dateEnable = moment(dateString).add(2,'hours');\n    let now = new Date();\n\n    return moment(now).isAfter(dateEnable) \n      \n  }\n\n  confirmDelete(){\n    this.dialogService.presentAlertConfirm('Confirmar','Estas seguro de eliminar este game',e => {\n      this.delete()\n    });\n   }\n\n   delete(){\n     this.gameModel.api_delete(this.game.id).subscribe(data => {\n       console.log(data);\n       if(data['status'] == 'success'){\n         this.dialogService.showToast('Partido Eliminado',null,'success');\n         //this.router.navigateByUrl('/home/games',{ replaceUrl: true });\n         //window.location.assign('#/home/games')\n         this.listsHomeService.remove('games',this.game.id);\n         this.navCtrl.navigateRoot('/home/games');\n         //this.gameService.listDelete(game.id);\n         //this.utilArray.listDelete(this.games,game.id)\n         \n       }\n     });\n   }\n\n\n   analyzeParameters(){\n     let reload = this.route.snapshot.queryParamMap.get('reload');\n     console.log('reload:',reload)\n   }\n  \n   get isAdminTeam(){\n    return this.authUser.isAdminGame(this.game) || this.authUser.isAdmin();\n  }\n\n \n\n}\n"],"sourceRoot":"webpack:///"}