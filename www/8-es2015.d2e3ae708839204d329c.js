(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"2Q27":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("9suA"),o=i("fXoL"),s=i("TEn/"),a=i("tyNb"),c=i("ofXK");let r=(()=>{class e extends n.a{constructor(e,t,i,n){super(n,e),this.viewCtrl=e,this.router=t,this.navParams=i,this.id=i.get("id")}ngOnInit(){}close(){this.viewCtrl.dismiss()}initObject(){}goPayment(){this.router.navigateByUrl("/payment/create/"+this.id),this.close()}}return e.\u0275fac=function(t){return new(t||e)(o.Lb(s.nb),o.Lb(a.g),o.Lb(s.pb),o.Lb(c.n))},e.\u0275cmp=o.Fb({type:e,selectors:[["app-alert-create-team"]],features:[o.vb],decls:16,vars:0,consts:[["slot","start"],["color","dark",3,"click"],["name","arrow-back"],[1,"text"],[1,"ion-margin-top"],[1,"ion-float-right",3,"click"]],template:function(e,t){1&e&&(o.Qb(0,"ion-header"),o.Qb(1,"ion-toolbar"),o.Qb(2,"ion-title"),o.vc(3,"Pago pendiente"),o.Pb(),o.Qb(4,"ion-buttons",0),o.Qb(5,"ion-button",1),o.Yb("click",(function(){return t.close()})),o.Mb(6,"ion-icon",2),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Qb(7,"ion-content"),o.Qb(8,"ion-card"),o.Qb(9,"ion-card-content"),o.Qb(10,"ion-text",3),o.vc(11," Para que los administradores de este equipo puedan modificar los datos (Fotos,nombre, jugadores, redes, sucesos de partidos , etc) es necesario abonar $500 mensualmente. "),o.Pb(),o.Mb(12,"br"),o.Qb(13,"div",4),o.Qb(14,"ion-button",5),o.Yb("click",(function(){return t.goPayment()})),o.vc(15," Realizar el pago"),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Pb())},directives:[s.x,s.jb,s.hb,s.j,s.i,s.y,s.r,s.k,s.l,s.eb],styles:[".text[_ngcontent-%COMP%]{font-size:x-large}"]}),e})()},ZETu:function(e,t,i){"use strict";i.d(t,"a",(function(){return x}));var n=i("mrSG"),o=i("8xVP"),s=i("j/D2"),a=i("fXoL"),c=i("G/jy"),r=i("vuFD"),d=i("TEn/"),l=i("y/q6"),b=i("qgph"),m=i("ofXK"),u=i("tyNb"),v=i("3Pt+");function h(e,t){if(1&e&&(a.Qb(0,"ion-col",9),a.Qb(1,"ion-text",10),a.vc(2),a.Pb(),a.Pb()),2&e){const e=a.ac(2);a.yb(2),a.xc(" ",e.team_l.name," ")}}function g(e,t){if(1&e&&(a.Qb(0,"ion-col",11),a.Qb(1,"ion-text",10),a.vc(2),a.Pb(),a.Pb()),2&e){const e=a.ac(2);a.yb(2),a.xc(" ",e.team_v.name," ")}}function f(e,t){1&e&&(a.Qb(0,"ion-list-header",10),a.Qb(1,"ion-label"),a.vc(2,"Sin Sucesos"),a.Pb(),a.Pb())}function p(e,t){if(1&e&&a.Mb(0,"img",17),2&e){const e=a.ac().$implicit;a.ic("src","assets/images/",e.type_event.icon,"",a.pc)}}function y(e,t){if(1&e){const e=a.Rb();a.Qb(0,"ion-buttons",18),a.Qb(1,"ion-button",19),a.Yb("click",(function(){a.oc(e);const t=a.ac(),i=t.$implicit,n=t.index;return a.ac(2).confirmDelete(i,n)})),a.Mb(2,"ion-icon",20),a.Pb(),a.Pb()}}const _=function(e){return{"ion-text-end":e}};function P(e,t){if(1&e&&(a.Qb(0,"ion-item",12),a.Qb(1,"ion-label"),a.Qb(2,"h3",13),a.uc(3,p,1,1,"img",14),a.vc(4),a.Qb(5,"b"),a.vc(6),a.Pb(),a.Qb(7,"a",15),a.vc(8),a.Pb(),a.Pb(),a.Pb(),a.uc(9,y,3,0,"ion-buttons",16),a.Pb()),2&e){const e=t.$implicit,i=a.ac(2);a.yb(1),a.Cb("",e.team.id==i.team_v.id?"item-v":""," ",e.team.id==i.team_l.id?"item-l":"",""),a.yb(1),a.gc("ngClass",a.jc(11,_,e.team.id==i.team_v.id)),a.yb(1),a.gc("ngIf",e.type_event.icon),a.yb(1),a.xc(" ",e.time,"\xb4 "),a.yb(2),a.xc("",e.type_event.name," "),a.yb(1),a.gc("routerLink","/player/profile/"+e.player.id),a.yb(1),a.xc(" ",e.player.name," "),a.yb(1),a.gc("ngIf",i.canEdit&&i.team_admin.id==e.team.id||i.twoTeam&&i.canEdit)}}function Q(e,t){if(1&e){const e=a.Rb();a.Qb(0,"ion-button",21),a.Yb("click",(function(){return a.oc(e),a.ac(2).addEvent()})),a.vc(1," Nuevo Suceso "),a.Pb()}}function w(e,t){if(1&e){const e=a.Rb();a.Qb(0,"ion-chip",24),a.Qb(1,"ion-label",25),a.vc(2," Eres el administrador de "),a.Qb(3,"b"),a.vc(4),a.Pb(),a.vc(5,", puedes administrar lo sucesos de tu equipo al activar la edici\xf3n. "),a.Pb(),a.Qb(6,"ion-toggle",26),a.Yb("ngModelChange",(function(t){return a.oc(e),a.ac(3).canEdit=t})),a.Pb(),a.Pb()}if(2&e){const e=a.ac(3);a.yb(4),a.xc("",e.team_admin.name," "),a.yb(2),a.gc("ngModel",e.canEdit)}}function M(e,t){if(1&e&&(a.Qb(0,"div",22),a.uc(1,w,7,2,"ion-chip",23),a.Pb()),2&e){const e=a.ac(2);a.yb(1),a.gc("ngIf",e.isAdmin)}}function T(e,t){if(1&e&&(a.Qb(0,"ion-card"),a.Qb(1,"ion-card-header",1),a.Qb(2,"ion-card-title"),a.vc(3,"Sucesos"),a.Pb(),a.Pb(),a.Qb(4,"ion-list"),a.Qb(5,"ion-grid"),a.Qb(6,"ion-row"),a.uc(7,h,3,1,"ion-col",2),a.uc(8,g,3,1,"ion-col",3),a.Pb(),a.Pb(),a.Mb(9,"div",4),a.uc(10,f,3,0,"ion-list-header",5),a.uc(11,P,10,13,"ion-item",6),a.Pb(),a.uc(12,Q,2,0,"ion-button",7),a.uc(13,M,2,1,"div",8),a.Pb()),2&e){const e=a.ac();a.yb(7),a.gc("ngIf",e.team_l),a.yb(1),a.gc("ngIf",e.team_v),a.yb(2),a.gc("ngIf",0==e.events.length),a.yb(1),a.gc("ngForOf",e.events),a.yb(1),a.gc("ngIf",e.canEdit),a.yb(1),a.gc("ngIf",e.team_admin)}}let x=(()=>{class e{constructor(e,t,i,n,s){this.requestService=e,this.dialog=t,this.modalController=i,this.authUser=n,this.paymentTeamService=s,this.events=[],this.team_admin=null,this.canEdit=!1,this.twoTeam=!1,this.gameModel=new o.a("Game",e),this.eventModel=new o.a("Event",e),console.log(this.game_id)}ngOnInit(){this.init()}init(){this.gameModel.api_functionModel(this.game_id,"dataEvent").subscribe(e=>{"success"==e.status&&(this.game=e.data.game,this.events=e.data.events,this.team_l=e.data.team_l,this.team_v=e.data.team_v,this.verificationAdmin()),console.log(this.events)})}verificationAdmin(){console.log("verificationAdmin"),this.authUser.isAdminOfTeam(this.team_l.id)||this.authUser.isAdminOfTeam(this.team_v.id)?(this.isAdmin=!0,this.authUser.isAdminOfTeam(this.team_l.id)&&(this.team_admin=this.team_l),this.authUser.isAdminOfTeam(this.team_v.id)&&(this.team_admin=this.team_v),this.authUser.isAdminOfTeam(this.team_l.id)&&this.authUser.isAdminOfTeam(this.team_v.id)&&(this.twoTeam=!0)):this.team_admin=null}confirmDelete(e,t){this.dialog.presentAlertConfirm("Confirmar","Estas seguro de eliminar este Suceso",i=>{this.delete(e,t)})}delete(e,t){return Object(n.b)(this,void 0,void 0,(function*(){this.paymentTeamService.setTeam(e.team),this.paymentTeamService.noPaid()?yield this.paymentTeamService.showAlert():this.eventModel.api_delete(e.id).subscribe(e=>{console.log(e),"success"==e.status&&(this.dialog.showToast("Suceso Eliminado",null,"success"),this.events.splice(t,1))})}))}addEvent(){return Object(n.b)(this,void 0,void 0,(function*(){const e=yield this.modalController.create({component:s.a,componentProps:{game_id:this.game_id,team_admin:this.team_admin,twoTeam:this.twoTeam,events:this.events,game:this.game}});return e.onDidDismiss().then(e=>{e.data&&e.data.event&&this.events.push(e.data.event)}),yield e.present()}))}}return e.\u0275fac=function(t){return new(t||e)(a.Lb(c.a),a.Lb(r.a),a.Lb(d.nb),a.Lb(l.a),a.Lb(b.a))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-event-list"]],inputs:{game_id:"game_id",isAdmin:"isAdmin"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"bg-l1"],["class","ion-text-start col-l",4,"ngIf"],["class","ion-text-end col-v",4,"ngIf"],[1,"separator"],["color","light",4,"ngIf"],["class","bg-l0",4,"ngFor","ngForOf"],["fill","outline","expand","block",3,"click",4,"ngIf"],["class","ion-text-center",4,"ngIf"],[1,"ion-text-start","col-l"],["color","light"],[1,"ion-text-end","col-v"],[1,"bg-l0"],[3,"ngClass"],["width","20px",3,"src",4,"ngIf"],["routerDirection","forward",3,"routerLink"],["slot","start",4,"ngIf"],["width","20px",3,"src"],["slot","start"],[3,"click"],["name","trash-outline"],["fill","outline","expand","block",3,"click"],[1,"ion-text-center"],["class","chip-admin","color","secondary",4,"ngIf"],["color","secondary",1,"chip-admin"],[1,"msj-is-admin"],[3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&a.uc(0,T,14,6,"ion-card",0),2&e&&a.gc("ngIf",t.events.length&&t.team_l&&t.team_v||t.isAdmin)},directives:[m.l,d.k,d.m,d.o,d.H,d.w,d.S,m.k,d.q,d.eb,d.I,d.G,d.D,m.j,u.i,d.tb,d.j,d.i,d.y,d.p,d.ib,d.c,v.d,v.g],styles:["ion-col[_ngcontent-%COMP%]{font-size:large;color:rgba(0,0,0,.7019607843137254);padding:7px}.col-v[_ngcontent-%COMP%]{border-top-right-radius:5px;border-right:4px solid var(--color-v)}.col-l[_ngcontent-%COMP%]{border-top-left-radius:5px}.col-l[_ngcontent-%COMP%], .item-l[_ngcontent-%COMP%]{border-left:4px solid var(--color-l)}.item-l[_ngcontent-%COMP%]{padding-left:5px}.item-v[_ngcontent-%COMP%]{border-right:4px solid var(--color-v);padding-right:5px}"]}),e})()},"j/D2":function(e,t,i){"use strict";i.d(t,"a",(function(){return y}));var n=i("mrSG"),o=i("8xVP"),s=i("9suA"),a=i("fXoL"),c=i("TEn/"),r=i("G/jy"),d=i("vuFD"),l=i("rLe3"),b=i("qgph"),m=i("ofXK"),u=i("3Pt+");function v(e,t){if(1&e&&(a.Qb(0,"ion-select-option",13),a.vc(1),a.Pb()),2&e){const e=t.$implicit;a.gc("value",e.id),a.yb(1),a.wc(e.name)}}function h(e,t){if(1&e&&(a.Qb(0,"ion-select-option",13),a.vc(1),a.Pb()),2&e){const e=t.$implicit;a.gc("value",e.id),a.yb(1),a.wc(e.name)}}function g(e,t){if(1&e){const e=a.Rb();a.Qb(0,"ion-item"),a.Qb(1,"ion-label",5),a.vc(2,"Equipo"),a.Pb(),a.Qb(3,"ion-select",14),a.Yb("ngModelChange",(function(t){return a.oc(e),a.ac(2).event.team_id=t})),a.uc(4,h,2,2,"ion-select-option",7),a.Pb(),a.Qb(5,"div",8),a.vc(6),a.Pb(),a.Pb()}if(2&e){const e=a.ac(2);a.yb(3),a.gc("ngModel",e.event.team_id),a.yb(1),a.gc("ngForOf",e.dataEvent.teams),a.yb(2),a.wc(e.eventModel.errorsForm.get("team_id"))}}function f(e,t){if(1&e&&(a.Qb(0,"ion-select-option",13),a.vc(1),a.Pb()),2&e){const e=t.$implicit;a.gc("value",e.id),a.yb(1),a.wc(e.name)}}function p(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",4),a.Yb("ngSubmit",(function(){return a.oc(e),a.ac().submit()}))("keyup",(function(){return a.oc(e),a.ac().eventModel.errorsForm.clear()})),a.Qb(1,"ion-item"),a.Qb(2,"ion-label",5),a.vc(3,"Tipo de Evento"),a.Pb(),a.Qb(4,"ion-select",6),a.Yb("ngModelChange",(function(t){return a.oc(e),a.ac().event.type_event_id=t})),a.uc(5,v,2,2,"ion-select-option",7),a.Pb(),a.Qb(6,"div",8),a.vc(7),a.Pb(),a.Pb(),a.uc(8,g,7,3,"ion-item",9),a.Qb(9,"ion-item"),a.Qb(10,"ion-label",5),a.vc(11,"Jugador"),a.Pb(),a.Qb(12,"ion-select",10),a.Yb("ngModelChange",(function(t){return a.oc(e),a.ac().event.player_id=t})),a.uc(13,f,2,2,"ion-select-option",7),a.Pb(),a.Qb(14,"div",8),a.vc(15),a.Pb(),a.Pb(),a.Qb(16,"ion-item"),a.Qb(17,"ion-label",5),a.vc(18,"Tiempo"),a.Pb(),a.Qb(19,"ion-input",11),a.Yb("ngModelChange",(function(t){return a.oc(e),a.ac().event.time=t})),a.Pb(),a.Pb(),a.Qb(20,"div",8),a.vc(21),a.Pb(),a.Qb(22,"ion-button",12),a.vc(23,"Guardar"),a.Pb(),a.Pb()}if(2&e){const e=a.ac();a.yb(4),a.gc("ngModel",e.event.type_event_id),a.yb(1),a.gc("ngForOf",e.dataEvent.types_events),a.yb(2),a.wc(e.eventModel.errorsForm.get("type_event_id")),a.yb(1),a.gc("ngIf",!e.team_admin||e.twoTeam),a.yb(4),a.gc("ngModel",e.event.player_id),a.yb(1),a.gc("ngForOf",e.getPlayers()),a.yb(2),a.wc(e.eventModel.errorsForm.get("player_id")),a.yb(4),a.gc("ngModel",e.event.time),a.yb(2),a.wc(e.eventModel.errorsForm.get("time"))}}let y=(()=>{class e extends s.a{constructor(e,t,i,n,s,a,c){super(c,n),this.navParams=e,this.requestService=t,this.dialogService=i,this.viewCtrl=n,this.utilArray=s,this.paymentTeamService=a,this.twoTeam=!1,this.events=[],this.myDateFilter=e=>6==e.getDay(),this.gameModel=new o.a("Game",t),this.eventModel=new o.a("Event",t),this.game_id=e.get("game_id"),this.twoTeam=e.get("twoTeam"),this.id=e.get("id"),this.team_admin=e.get("team_admin"),this.events=e.get("events"),this.game=e.get("game")}initObject(){return Object(n.b)(this,void 0,void 0,(function*(){yield this.init(),this.loadEvent()}))}loadEvent(){this.id||(this.event={game_id:this.game_id,type_event_id:"",player_id:"",team_id:this.team_admin?this.team_admin.id:"",time:""})}init(){return Object(n.b)(this,void 0,void 0,(function*(){yield this.eventModel.api_function("dataEventCreate",{game_id:this.game_id}).subscribe(e=>{"success"==e.status&&(this.dataEvent=e.data,this.types_events=this.dataEvent.types_events),console.log("ty",this.types_events),console.log(this.dataEvent)})}))}getPlayers(){let e=this.event.team_id;if(this.team_admin&&(e=this.event.team_id),e){let t=this.dataEvent.teams.find(t=>t.id===e);if(t)return t.players}return[]}submit(){return Object(n.b)(this,void 0,void 0,(function*(){try{yield this.isValid()}catch(t){return console.log(t),void this.dialogService.showToast(t.message,"Error","danger")}let e=this.game["team_"+this.getTeamType()];if(this.paymentTeamService.setTeam(e),this.paymentTeamService.noPaid())return yield this.close(),void(yield this.paymentTeamService.showAlert());this.event.id?this.eventModel.api_update(this.event).subscribe(e=>{var t;"success"==e.status&&(this.dialogService.showToast(null!==(t=e.msjSuccess)&&void 0!==t?t:"Registrado"),console.log(e),this.dismiss(e.Event))}):this.eventModel.api_create(this.event).subscribe(e=>{var t;"success"==e.status&&(this.dialogService.showToast(null!==(t=e.msjSuccess)&&void 0!==t?t:"Registrado"),this.dismiss(e.Event))})}))}dismiss(e){this.viewCtrl.dismiss({event:e})}close(){return Object(n.b)(this,void 0,void 0,(function*(){yield this.viewCtrl.dismiss()}))}print(){console.log(this.event)}isValid(){return Object(n.b)(this,void 0,void 0,(function*(){if(!this.event.team_id)throw new Error("Seleccione un equipo");if(!this.event.type_event_id)throw new Error("Seleccione un evento");var e=this.getTeamType();let t=this.utilArray.findList(this.types_events,this.event.type_event_id);if(t&&"Gol"==t.name){let t=this.game[e+"_goals"];if(this.events.filter(e=>e.team_id==this.event.team_id&&"Gol"==e.type_event.name).length+1>t)throw new Error(0==t?"El equipo seleccionado no ha convertido goles en este partido, no es posible registrar este evento.":`No puede a\xf1adir m\xe1s de ${t} goles para \xe9ste equipo en \xe9ste partido.`)}return!0}))}getTeamType(){var e="l";return this.game.v_team==this.event.team_id&&(e="v"),e}}return e.\u0275fac=function(t){return new(t||e)(a.Lb(c.pb),a.Lb(r.a),a.Lb(d.a),a.Lb(c.nb),a.Lb(l.a),a.Lb(b.a),a.Lb(m.n))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-event-form"]],features:[a.vb],decls:9,vars:1,consts:[["slot","start"],["color","dark",3,"click"],["name","arrow-back"],[3,"ngSubmit","keyup",4,"ngIf"],[3,"ngSubmit","keyup"],["position","floating"],["name","type_event_id",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[2,"color","red","padding-top","0.2rem"],[4,"ngIf"],["name","player_id",3,"ngModel","ngModelChange"],["type","number","name","time",3,"ngModel","ngModelChange"],["type","submit","expand","block"],[3,"value"],["name","team_id",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(a.Qb(0,"ion-header"),a.Qb(1,"ion-toolbar"),a.Qb(2,"ion-title"),a.vc(3,"Evento"),a.Pb(),a.Qb(4,"ion-buttons",0),a.Qb(5,"ion-button",1),a.Yb("click",(function(){return t.close()})),a.Mb(6,"ion-icon",2),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Qb(7,"ion-content"),a.uc(8,p,24,9,"form",3),a.Pb()),2&e&&(a.yb(8),a.gc("ngIf",t.dataEvent))},directives:[c.x,c.jb,c.hb,c.j,c.i,c.y,c.r,m.l,u.i,u.e,u.f,c.D,c.G,c.W,c.ub,u.d,u.g,m.k,c.C,c.qb,c.X],styles:[""]}),e})()},j1ZV:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("ofXK"),o=i("TEn/"),s=i("tyNb"),a=i("6g0+"),c=i("3Pt+"),r=i("fXoL");let d=(()=>{class e{}return e.\u0275mod=r.Jb({type:e}),e.\u0275inj=r.Ib({factory:function(t){return new(t||e)},imports:[[n.b,o.kb.forRoot(),c.a,s.j,a.b]]}),e})()},qgph:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("mrSG"),o=i("2Q27"),s=i("fXoL"),a=i("TEn/");let c=(()=>{class e{constructor(e){this.modalController=e,this.active=!1}setTeam(e){this.team=e}isActive(){return this.active}noPaid(){return!!this.active&&!this.team.paid}showAlert(){return Object(n.b)(this,void 0,void 0,(function*(){const e=yield this.modalController.create({component:o.a,componentProps:{id:this.team.id}});return e.onDidDismiss().then(e=>{console.log("return paid")}),yield e.present()}))}}return e.\u0275fac=function(t){return new(t||e)(s.Ub(a.nb))},e.\u0275prov=s.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},rLe3:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("fXoL");let o=(()=>{class e{constructor(){}listAddLast(e,t){e.push(t)}listAddFirst(e,t){e.unshift(t)}listUpdate(e,t,i){let n=this.findIndexList(e,t);n>=0&&(e[n]=i)}listDelete(e,t){let i=this.findIndexList(e,t);i>=0&&e.splice(i,1)}findList(e,t){return e.find(e=>e.id===t)}findIndexList(e,t){return e.findIndex(e=>e.id===t)}updateAttribustesObject(e,t,i=[]){console.log("update attributes");for(let n of i)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);