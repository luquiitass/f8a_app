(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{cGQY:function(t,e,n){"use strict";n.r(e),n.d(e,"GamesPageModule",(function(){return j}));var i=n("ofXK"),o=n("3Pt+"),a=n("TEn/"),r=n("tyNb"),s=n("mrSG"),c=n("8xVP"),l=n("wd/R"),b=n("z0x6"),u=n("fXoL"),d=n("G/jy"),g=n("2Rin"),f=n("vuFD"),m=n("y/q6"),h=n("rLe3"),p=n("T3jL"),v=n("WBL6"),P=n("QbbR");function y(t,e){if(1&t&&(u.Qb(0,"ion-segment-button",9),u.vc(1),u.Pb()),2&t){var n=e.$implicit,i=e.index,o=u.ac(2);u.hc("value",i),u.ic("id","sgm_",i,""),u.yb(1),u.xc(" ",o.formatDate(n.date)," ")}}function w(t,e){1&t&&(u.Qb(0,"ion-list-header",10),u.Qb(1,"ion-label"),u.vc(2,"Sin registros"),u.Pb(),u.Pb())}function M(t,e){if(1&t&&u.Mb(0,"app-game-list",11),2&t){var n=e.$implicit;u.ic("routerLink","/games/profile/",n.id,""),u.gc("game",n)}}function Q(t,e){if(1&t){var n=u.Rb();u.Qb(0,"ion-item",12),u.Yb("click",(function(){return u.oc(n),u.ac(2).addGame()})),u.Qb(1,"ion-label"),u.vc(2,"Crear nuevo partido"),u.Pb(),u.Mb(3,"ion-icon",13),u.Mb(4,"ion-ripple-effect"),u.Pb()}}function x(t,e){if(1&t){var n=u.Rb();u.Qb(0,"div"),u.Qb(1,"ion-refresher",2),u.Yb("ionRefresh",(function(t){return u.oc(n),u.ac().init(t)})),u.Mb(2,"ion-refresher-content"),u.Pb(),u.Qb(3,"ion-list"),u.Qb(4,"ion-grid"),u.Qb(5,"ion-row"),u.Qb(6,"ion-col",3),u.Qb(7,"ion-segment",4),u.Yb("ngModelChange",(function(t){return u.oc(n),u.ac().tabSelected=t}))("ionChange",(function(t){return u.oc(n),u.ac().selectDate(t)})),u.uc(8,y,2,3,"ion-segment-button",5),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.uc(9,w,3,0,"ion-list-header",6),u.uc(10,M,1,2,"app-game-list",7),u.uc(11,Q,5,0,"ion-item",8),u.Pb(),u.Pb()}if(2&t){var i=u.ac();u.yb(7),u.gc("ngModel",i.tabSelected),u.yb(1),u.gc("ngForOf",i.tabs),u.yb(1),u.gc("ngIf",0==i.listsHomeService.games.length),u.yb(1),u.gc("ngForOf",i.listsHomeService.games),u.yb(1),u.gc("ngIf",i.authUser.isAdminTeam())}}function S(t,e){1&t&&(u.Qb(0,"ion-card"),u.Qb(1,"div",16),u.Qb(2,"div",17),u.Qb(3,"div",18),u.Qb(4,"div",19),u.Mb(5,"ion-skeleton-text",20),u.Qb(6,"ion-avatar",0),u.Mb(7,"ion-skeleton-text",21),u.Pb(),u.Pb(),u.Qb(8,"div",22),u.Mb(9,"ion-skeleton-text",23),u.Pb(),u.Qb(10,"div",19),u.Mb(11,"ion-skeleton-text",20),u.Qb(12,"ion-avatar",0),u.Mb(13,"ion-skeleton-text",21),u.Pb(),u.Pb(),u.Pb(),u.Qb(14,"div",24),u.Mb(15,"ion-skeleton-text",25),u.Pb(),u.Pb(),u.Pb(),u.Pb())}function k(t,e){if(1&t&&(u.Qb(0,"div"),u.Qb(1,"ion-grid"),u.Qb(2,"ion-row"),u.Qb(3,"ion-col"),u.Mb(4,"ion-skeleton-text",14),u.Pb(),u.Qb(5,"ion-col"),u.Mb(6,"ion-skeleton-text",14),u.Pb(),u.Qb(7,"ion-col"),u.Mb(8,"ion-skeleton-text",14),u.Pb(),u.Pb(),u.Pb(),u.uc(9,S,16,0,"ion-card",15),u.Pb()),2&t){var n=u.ac();u.yb(9),u.gc("ngForOf",n.listSkeleton)}}var L=[{path:"",component:function(){function t(t,e,n,i,o,a,r,s,l){this.request=t,this.util=e,this.dialogService=n,this.modalCtrl=i,this.authUser=o,this.utilArray=a,this.route=r,this.listsHomeService=s,this.reloadGlobal=l,this.tabs=[],this.listSkeleton=new Array(3),this.firstLoad=!0,this.modelGame=new c.a("Game",t)}return t.prototype.ngOnInit=function(){var t=this;this.init(),setTimeout((function(){t.analyzeParameters()}),1e3),this.reloadGlobal.data$.subscribe((function(e){t.init()}))},t.prototype.init=function(t){return void 0===t&&(t=null),Object(s.b)(this,void 0,void 0,(function(){var e=this;return Object(s.d)(this,(function(n){return this.modelGame.api_function("pageHomeGames").subscribe((function(n){"success"==n.status&&(e.tabs=n.data.dates,e.selectFirst()),t&&t.target.complete(),console.log(n),e.firstLoad=!1}),(function(n){t&&t.target.complete(),console.error(n),e.firstLoad=!1})),[2]}))}))},t.prototype.selectFirst=function(){return Object(s.b)(this,void 0,void 0,(function(){return Object(s.d)(this,(function(t){switch(t.label){case 0:return this.tabs.length>0?(this.listsHomeService.games=this.tabs[0].results,this.tabSelected=0,[4,this.delay(1500)]):[3,2];case 1:return t.sent(),this.focusSegment(),[3,3];case 2:this.listsHomeService.results=[],t.label=3;case 3:return[2]}}))}))},t.prototype.selectDate=function(t){return Object(s.b)(this,void 0,void 0,(function(){var e,n,i=this;return Object(s.d)(this,(function(o){switch(o.label){case 0:return e=parseInt(t.detail.value),(n=this.tabs[e])&&n.results?(this.listsHomeService.games=n.results,this.focusSegment(),[2]):[4,this.dialogService.loadingProgres()];case 1:return o.sent(),n.date||(n.date=l().format("YYYY-MM-DD")),this.modelGame.api_function("gamesByDate",{date:n.date}).subscribe((function(t){"success"==t.status&&(i.tabs[e].results=t.data,i.listsHomeService.games=i.tabs[e].results,i.focusSegment()),i.dialogService.dimissLoaging(),console.log(t)}),(function(t){console.error(t),i.dialogService.dimissLoaging()})),[2]}}))}))},t.prototype.focusSegment=function(){this.util.focusSegment("sgm_"+this.tabSelected)},t.prototype.delay=function(t){return new Promise((function(e){return setTimeout(e,t)}))},t.prototype.formatDate=function(t){return l(t).locale("es").format("DD MMMM YYYY")},t.prototype.addGame=function(){return Object(s.b)(this,void 0,void 0,(function(){var t,e=this;return Object(s.d)(this,(function(n){switch(n.label){case 0:return console.log("date",this.tabs[this.tabSelected]),[4,this.modalCtrl.create({component:b.a,componentProps:{date:this.tabs[this.tabSelected]?this.tabs[this.tabSelected].date:""}})];case 1:return(t=n.sent()).onDidDismiss().then((function(t){if(console.log("crate game"),t.data&&t.data.game){var n=t.data.game,i=e.util.setFormatMoment(n.date,"YYYY-MM-DD"),o=e.tabs.map((function(t){return t.date})).indexOf(i);o>=0||(e.tabs[o=e.tabs.length]={date:i,results:[]}),e.utilArray.listAddFirst(e.tabs[o].results,n),e.tabSelected=o,e.focusSegment()}})),[4,t.present()];case 2:return[2,n.sent()]}}))}))},t.prototype.analyzeParameters=function(){console.log("run analyzeParameters"),this.route&&this.route.snapshot.queryParamMap.get("create")&&this.addGame()},t.prototype.ionViewWillEnter=function(){console.log("ionViewWillEnter")},t.prototype.ionViewDidEnter=function(){console.log("ionViewDidEnter")},t.prototype.ionViewWillLeave=function(){console.log("ionViewWillLeave")},t.prototype.ionViewDidLeave=function(){console.log("ionViewDidLeave")},t.\u0275fac=function(e){return new(e||t)(u.Lb(d.a),u.Lb(g.a),u.Lb(f.a),u.Lb(a.nb),u.Lb(m.a),u.Lb(h.a),u.Lb(r.a),u.Lb(p.a),u.Lb(v.a))},t.\u0275cmp=u.Fb({type:t,selectors:[["app-games"]],decls:9,vars:2,consts:[["slot","start"],[4,"ngIf"],["slot","fixed",3,"ionRefresh"],["size","12"],["scrollable","",3,"ngModel","ngModelChange","ionChange"],[3,"value","id",4,"ngFor","ngForOf"],["color","tertiary",4,"ngIf"],["routerDirection","forward",3,"game","routerLink",4,"ngFor","ngForOf"],["class","ion-activatable",3,"click",4,"ngIf"],[3,"value","id"],["color","tertiary"],["routerDirection","forward",3,"game","routerLink"],[1,"ion-activatable",3,"click"],["name","chevron-forward-outline"],["animated","",2,"width","100%","height","30px"],[4,"ngFor","ngForOf"],[1,"ion-padding","custom-skeleton"],[1,"game"],[1,"team-list","contenedor"],[1,"team"],["animated","",2,"width","80%"],["animated",""],[1,"vs"],["animated","",2,"width","20px"],[1,"date","ion-text-center",2,"width","100%"],["animated","",2,"width","80px","margin","auto"]],template:function(t,e){1&t&&(u.Qb(0,"ion-header"),u.Qb(1,"ion-toolbar"),u.Qb(2,"ion-buttons",0),u.Mb(3,"ion-menu-button"),u.Pb(),u.Qb(4,"ion-title"),u.vc(5,"Partidos"),u.Pb(),u.Pb(),u.Pb(),u.Qb(6,"ion-content"),u.uc(7,x,12,5,"div",1),u.uc(8,k,10,1,"div",1),u.Pb()),2&t&&(u.yb(7),u.gc("ngIf",!e.firstLoad),u.yb(1),u.gc("ngIf",e.firstLoad))},directives:[a.x,a.jb,a.j,a.K,a.hb,a.r,i.l,a.O,a.P,a.H,a.w,a.S,a.q,a.U,a.ub,o.d,o.g,i.k,a.V,a.I,a.G,P.a,a.tb,r.h,a.D,a.y,a.Q,a.Y,a.k,a.e],styles:[".team-list[_ngcontent-%COMP%]{display:block}.vs[_ngcontent-%COMP%]{width:6%}.game[_ngcontent-%COMP%]{width:100%;padding:10px;background-repeat:no-repeat;background-size:100%;font-size:small}.team[_ngcontent-%COMP%]{display:flex;align-items:center;width:47%;flex-flow:column-reverse}.team-name[_ngcontent-%COMP%]{margin-left:15px;margin-right:15px;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.img-team[_ngcontent-%COMP%]{border-radius:50%;background-position:50%;width:30px;height:30px}.contenedor[_ngcontent-%COMP%]{margin:10px auto;display:flex;align-items:center;justify-content:center;width:100%;text-align:-webkit-center}.date[_ngcontent-%COMP%]{text-align:center}"]}),t}()}],O=function(){function t(){}return t.\u0275mod=u.Jb({type:t}),t.\u0275inj=u.Ib({factory:function(e){return new(e||t)},imports:[[r.j.forChild(L)],r.j]}),t}(),D=n("j1ZV"),j=function(){function t(){}return t.\u0275mod=u.Jb({type:t}),t.\u0275inj=u.Ib({factory:function(e){return new(e||t)},imports:[[i.b,o.a,a.kb,O,D.a]]}),t}()}}]);