{"version":3,"sources":["./src/app/pages/notification/list/list.page.html","./src/app/pages/notification/list/list-routing.module.ts","./src/app/pages/notification/list/list.module.ts","./src/app/pages/notification/list/list.page.scss","./src/app/pages/notification/list/list.page.ts"],"names":[],"mappings":"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","file":"pages-notification-list-list-module.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"home/results\\\"></ion-back-button>    \\n    </ion-buttons>\\n    <ion-title>Notificaciones</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"init($event)\\\">\\n    <ion-refresher-content></ion-refresher-content>\\n  </ion-refresher>\\n\\n\\n  <ion-list>\\n\\n    <ion-list-header *ngIf=\\\"notifications.length == 0\\\"  color=\\\"light\\\">\\n      <ion-label>No posee notificaciones</ion-label>\\n    </ion-list-header>\\n \\n\\n      <app-notification\\n        *ngFor=\\\"let not of notifications\\\"  (click)=\\\"visibleNot(not)\\\" [class]=\\\"{'no-active' : not.isShow}\\\"\\n        style=\\\"width: 100%;\\\"\\n        [notification] = \\\"not\\\"\\n      ></app-notification>\\n\\n  </ion-list>\\n\\n  <ion-infinite-scroll threshold=\\\"100px\\\" (ionInfinite)=\\\"loadData($event)\\\">\\n    <ion-infinite-scroll-content\\n      loadingSpinner=\\\"bubbles\\\"\\n      loadingText=\\\"\\\">\\n    </ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ListPage } from './list.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ListPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ListPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ListPageRoutingModule } from './list-routing.module';\n\nimport { ListPage } from './list.page';\nimport {ComponentsModule} from '../../../components/components.module'\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ListPageRoutingModule,\n    ComponentsModule\n  ],\n  declarations: [ListPage]\n})\nexport class ListPageModule {}\n","export default \".no-active {\\n  --ion-background-color: #e9ebee !important;\\n}\\n\\n.date {\\n  font-size: x-small;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvbm90aWZpY2F0aW9uL2xpc3QvbGlzdC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSwwQ0FBQTtBQUNKOztBQUVBO0VBQ0ksa0JBQUE7QUFDSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL25vdGlmaWNhdGlvbi9saXN0L2xpc3QucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm5vLWFjdGl2ZXtcbiAgICAtLWlvbi1iYWNrZ3JvdW5kLWNvbG9yOiAjZTllYmVlICFpbXBvcnRhbnQ7XG59XG5cbi5kYXRle1xuICAgIGZvbnQtc2l6ZTogeC1zbWFsbDtcbn0iXX0= */\";","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { Model } from 'src/app/api/models/model';\nimport { RequestService } from 'src/app/api/request.service';\nimport { AuthUserService } from 'src/app/services/auth-user.service';\nimport { UtilArrayService } from 'src/app/services/util-array.service';\nimport { NavController, IonInfiniteScroll } from '@ionic/angular';\nimport { ScreenLoadingService } from 'src/app/services/screen-loading.service';\n\n@Component({\n  selector: 'app-list',\n  templateUrl: './list.page.html',\n  styleUrls: ['./list.page.scss'],\n})\nexport class ListPage implements OnInit {\n\n  @ViewChild(IonInfiniteScroll) infiniteScroll: IonInfiniteScroll;\n\n\n  public notifications = [];\n  public notificationModel : Model;\n  public userModel : Model;\n\n  firstLoading = true;\n  dataPaginate : any;\n\n  constructor(\n    public request : RequestService,\n    public userAuth : AuthUserService,\n    public utilArray : UtilArrayService,\n    public navCtrl : NavController,\n    public loading : ScreenLoadingService\n  ) {\n    this.notificationModel = new Model('Notification',request);\n    this.userModel = new Model('User',request);\n   }\n\n  ngOnInit() {\n\n    this.notifications = this.userAuth.user.notifications ? this.userAuth.user.notifications : [] ;\n\n    this.init();\n  }\n\n\n  async init($event = null,paginate = false){\n\n    let page = {};\n    \n    if(paginate && this.dataPaginate ){\n      page = {\n        page : this.dataPaginate.current_page + 1\n      }\n    }\n\n    this.loading.start();\n\n    this.userModel.api_functionModel(this.userAuth.user.id , 'resetNotifications').subscribe(()=>{\n      console.log('restart count  notifications')\n      this.userAuth.user.counts_not = 0;\n      this.userAuth.saveUser();\n      this.loading.end();\n    },error => {\n      this.loading.end();\n    })\n\n    \n    this.userModel.api_functionModel(this.userAuth.user.id ,'pageNotifications',page).subscribe(\n      response => {\n        console.log(response);\n\n        if(response['status'] == 'success'){\n          this.dataPaginate = response['data'];\n          if(!paginate){\n            this.notifications = response['data']['data']\n          }else{\n\n            for(let not of response['data']['data']){\n              this.notifications.push(not);\n            }\n            \n          }\n        }\n\n        if($event)\n          $event.target.complete();\n        \n        this.firstLoading = false;\n\n      },\n      error => {\n        console.log(error)\n        if($event)\n          $event.target.complete();\n      }\n    )\n  }\n\n  openModal(){\n\n  }\n\n  loadData(event) {\n    if(this.dataPaginate &&  this.dataPaginate.last_page == this.dataPaginate.current_page){\n      event.target.complete();\n      event.target.disabled = true;\n      this.infiniteScroll.disabled = !this.infiniteScroll.disabled;\n      return;\n    }\n\n    this.init(event,true);\n  }\n\n  visibleNot(not){\n    if(not.id)\n      this.notificationModel.api_functionModel(not.id,'viewed').subscribe(\n        (response)=>{\n          let notification = response['data'];\n          this.utilArray.listUpdate(this.notifications ,notification.id , notification);\n      })\n\n    this.navCtrl.navigateForward(not.route);\n  }\n\n}\n"],"sourceRoot":"webpack:///"}