{"version":3,"sources":["webpack:///src/app/pages/field/field-form/field-form.page.html","webpack:///src/app/pages/field/list-fields/list-fields.page.html","webpack:///src/app/pages/field/field-form/field-form.page.scss","webpack:///src/app/pages/field/field-form/field-form.page.ts","webpack:///src/app/pages/field/list-fields/list-fields.page.scss","webpack:///src/app/pages/field/list-fields/list-fields.page.ts"],"names":["FieldFormPage","request","dialogService","viewCtrl","photoService","navParams","location","newMarker","modelField","id","get","console","log","field","name","lat","lng","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","error","api_find","subscribe","data","leafletMap","addNewMarker","api_update","showToast","dismiss","api_create","reset","map","self","on","setTimeout","regresh","setView","attribution","addTo","e","latlng","loadFields","removeLayer","myCustomColour","markerHtmlStyles","icon","className","iconAnchor","labelAnchor","popupAnchor","html","draggable","alt","shadowPane","title","event","marker","target","getLatLng","openPopup","bindPopup","autoPan","api_function","response","forEach","element","addMarker","parseFloat","Icono","iconUrl","iconSize","shadowSize","shadowAnchor","bindTooltip","permanent","openTooltip","val","_popup","setContent","invalidateSize","off","remove","selector","template","ListFieldsPage","requestService","modalController","utilArray","util","dialog","authUser","transfDat","segment_select","fields","oldFields","markers","canEdit","isSelect","getData","clear","init","loadingProgres","dimissLoaging","create","component","modal","onDidDismiss","then","listAddFirst","present","text","value","length","filter","toUpperCase","includes","$event","stopPropagation","presentAlertConfirm","api_delete","listDelete","componentProps","listUpdate","detail","el","m","push"],"mappings":"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","file":"default~games-games-module~pages-field-list-fields-list-fields-module~pages-game-create-game-admin-c~9b9fc035-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>Cancha</ion-title>\\n\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button color=\\\"dark\\\" (click)=\\\"close()\\\">\\n          <ion-icon name=\\\"arrow-back\\\"></ion-icon>\\n      </ion-button>\\n  </ion-buttons>\\n  \\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n  <form (ngSubmit)=\\\"submit()\\\"    (keyup)=\\\"modelField.errorsForm.clear()\\\" >\\n\\n    <div class=\\\"info\\\">\\n      Ingrese un nombre para identificar la cancha <span class=\\\"sug\\\"> (Recomendamos el NOMBRE DEL EQUIPO que utiliza la cancha o el NOMBRE DEL LUGAR donde se encuentra ubicado)</span>, después seleccione la ubicación en el mapa.\\n    </div>\\n\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\" >Nombre</ion-label>\\n      <ion-input type=\\\"text\\\" [value]=\\\"field.name\\\" name=\\\"name\\\" (input)=\\\"inputVal($event.target.value ) \\\"></ion-input>\\n    </ion-item>\\n    <div style=\\\"color: red; padding-top: 0.2rem\\\" >{{ modelField.errorsForm.get('name') }}</div>\\n\\n    <br>\\n    \\n    <div id=\\\"mapId2\\\" style=\\\"min-width: 100%; min-height: 400px !important;\\\">\\n    </div>\\n    <div class=\\\"desc\\\" >\\n      Mantén presionado la ubicación en el mapa para añadir la ubicación.\\n    </div>\\n\\n    <ion-button (click)=\\\"submit()\\\" expand=\\\"block\\\">Guardar</ion-button>\\n\\n  </form>\\n\\n</ion-content>\\n\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>Canchas</ion-title>\\n\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/home/teams\\\" (click)=\\\"close()\\\"></ion-back-button>\\n    </ion-buttons>\\n\\n    <ion-buttons slot=\\\"secondary\\\" >\\n      \\n      <ion-button  (click)=\\\"canEdit = !canEdit\\\" *ngIf=\\\"segment_select == 'list'\\\">\\n        <ion-icon name=\\\"create-outline\\\"></ion-icon>\\n      </ion-button>\\n     \\n      <ion-button  (click)=\\\"add()\\\">\\n        <ion-icon name=\\\"add-outline\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n\\n  <ion-segment (ionChange)=\\\"segmentChanged($event)\\\" [value]=\\\"segment_select\\\"  *ngIf=\\\"!isSelect\\\">\\n    <ion-segment-button value=\\\"list\\\">\\n      <ion-label>Lista</ion-label>\\n    </ion-segment-button>\\n    <ion-segment-button value=\\\"map\\\">\\n      <ion-label>Mapa</ion-label>\\n    </ion-segment-button>\\n  </ion-segment>\\n\\n  <ion-searchbar \\n    placeholder=\\\"Filtrar Canchas\\\"   \\n    (keyup)=\\\"filterField($event)\\\" \\n    debounce=\\\"500\\\"\\n    (ionClear)=\\\"cancelFilter($event)\\\"\\n  ></ion-searchbar>\\n\\n  <ion-item *ngIf=\\\"fields.length == 0\\\">\\n    <label>No se han encontrado registros</label>\\n  </ion-item>\\n\\n  <div [style.display]=\\\" segment_select =='list' ?  'block' : 'none'\\\" >\\n\\n    <ion-list>\\n      <ion-item *ngFor=\\\"let field of fields\\\" (click)=\\\"dismiss(field)\\\">\\n        <label (click)=\\\"show(field,$event)\\\">{{field.name}}</label>\\n  \\n        <ion-buttons slot=\\\"end\\\" *ngIf=\\\"canEdit\\\">\\n          <ion-button (click)=\\\"showEdit(field,$event)\\\" *ngIf=\\\"!field.team_id\\\">\\n            <ion-icon slot=\\\"icon-only\\\" name=\\\"create-outline\\\"></ion-icon>\\n          </ion-button>\\n          <ion-button (click)=\\\"confirmDelete(field,$event)\\\" *ngIf=\\\"authUser.isAdmin()\\\">\\n            <ion-icon name=\\\"trash-outline\\\"></ion-icon>\\n          </ion-button>\\n        </ion-buttons>\\n      </ion-item>\\n    </ion-list>\\n  </div>\\n\\n  <div [style.display]=\\\" segment_select =='map' && !isSelect ?  'block' : 'none'\\\" >\\n  <div id=\\\"mapId3\\\" style=\\\"min-width: 100%; min-height: 400px !important;\\\" >\\n    </div>\\n  </div>\\n\\n \\n</ion-content>\\n\";","export default \"#mapId {\\n  min-width: 100% !important;\\n  min-height: 300px !important;\\n}\\n\\n#mapId2 {\\n  min-width: 100% !important;\\n  min-height: 300px !important;\\n}\\n\\n.desc {\\n  margin: 10px;\\n}\\n\\n.info {\\n  color: #babdbf;\\n  margin: 15px;\\n}\\n\\n.sug {\\n  color: #727475;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvZmllbGQvZmllbGQtZm9ybS9maWVsZC1mb3JtLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLDBCQUFBO0VBQ0EsNEJBQUE7QUFDSjs7QUFFQTtFQUNJLDBCQUFBO0VBQ0EsNEJBQUE7QUFDSjs7QUFFQTtFQUNJLFlBQUE7QUFDSjs7QUFFQTtFQUNJLGNBQUE7RUFDQSxZQUFBO0FBQ0o7O0FBRUE7RUFDSSxjQUFBO0FBQ0oiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9maWVsZC9maWVsZC1mb3JtL2ZpZWxkLWZvcm0ucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI21hcElke1xuICAgIG1pbi13aWR0aDogMTAwJSAhaW1wb3J0YW50O1xuICAgIG1pbi1oZWlnaHQ6IDMwMHB4ICFpbXBvcnRhbnQ7XG59XG5cbiNtYXBJZDJ7XG4gICAgbWluLXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7XG4gICAgbWluLWhlaWdodDogMzAwcHggIWltcG9ydGFudDtcbn1cblxuLmRlc2N7XG4gICAgbWFyZ2luOiAxMHB4O1xufVxuXG4uaW5mb3tcbiAgICBjb2xvcjogI2JhYmRiZjtcbiAgICBtYXJnaW46IDE1cHg7XG59XG5cbi5zdWd7XG4gICAgY29sb3I6ICM3Mjc0NzU7XG59Il19 */\";","import { Component, OnInit } from '@angular/core';\nimport { RequestService } from 'src/app/api/request.service';\nimport { DialogService } from 'src/app/api/util/dialog.service';\nimport { ModalController, NavParams } from '@ionic/angular';\nimport { PhotoService } from 'src/app/services/photo.service';\nimport { Model } from 'src/app/api/models/model';\nimport { ModalForm } from 'src/app/models/modal-form';\nimport { ModalFormInterface } from 'src/app/interfaces/modal-form-interface';\nimport { PlatformLocation } from '@angular/common';\n\nimport * as Leaflet from 'leaflet';\nimport { antPath } from 'leaflet-ant-path';\n\n\n@Component({\n  selector: 'app-field-form',\n  templateUrl: './field-form.page.html',\n  styleUrls: ['./field-form.page.scss'],\n})\nexport class FieldFormPage extends ModalForm implements OnInit , ModalFormInterface {\n\n  public modelField : Model;\n  public id: any;\n  public field ;\n\n  map: Leaflet.Map;\n  newMarker = null;\n\n  position : any;\n\n\n  constructor(\n    public request : RequestService,\n    public dialogService : DialogService,\n    public viewCtrl: ModalController,\n    public photoService : PhotoService,\n    navParams: NavParams,\n    location: PlatformLocation,\n\n\n  ) {\n    super(location,viewCtrl)\n\n    this.modelField = new Model('Field',request);\n\n    this.id = navParams.get('id') ;\n\n    \n\n    \n   }\n\n\n   initObject(){\n    \n    console.log('initObject');\n\n    this.field = { \n      name : '',\n      lat : -27.603857971720405,\n      lng : -55.323644024643414\n    };  \n\n    if(navigator.geolocation){\n      navigator.geolocation.getCurrentPosition((position) => {\n           this.field.lat= position.coords.latitude;\n          this.field.lng = position.coords.longitude;\n        console.log('current pos',position)\n      },error =>{\n        console.error(error)\n      })\n    }\n\n    if(this.id){\n      this.modelField.api_find(this.id).subscribe(data => {\n        console.log('load field', data)\n        if(data['status'] == 'success'){\n          this.field = data['Field'];\n          this.leafletMap();\n          this.addNewMarker();\n        }\n      })\n    }else{\n      this.leafletMap();\n    }\n\n\n  }\n\n  submit(){\n    if(this.field.id){\n      this.modelField.api_update(this.field).subscribe(data => {\n        if(data['status'] == 'success'){\n          this.dialogService.showToast( data['msjSuccess'] ?? 'Registrado' );\n          this.dismiss(data['Field'])\n        }\n      });\n\n    }else{\n      this.modelField.api_create(this.field).subscribe(data => {\n        if(data['status'] == 'success'){\n          this.dialogService.showToast( data['msjSuccess'] ?? 'Registrado' );\n          this.dismiss(data['Field'])\n        }\n    })\n    }\n  }\n\n  dismiss(field) {\n    this.viewCtrl.dismiss(\n      {\n        field : field,\n      }\n    );\n  }\n\n  close(){\n    this.viewCtrl.dismiss();\n  }\n\n  leafletMap() {\n\n    this.reset();\n\n    this.map = Leaflet.map('mapId2');\n\n    const self = this;\n    \n    this.map.on(\"load\",() => { \n      console.log('load map')\n\n      setTimeout(() => {\n        console.log('refresh')\n      this.regresh();\n    }, 1000); });\n    \n    \n    this.map.setView([this.field.lat,this.field.lng], 11);\n\n    //old\n    Leaflet.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: 'futbol8alem.com',\n      id: 'mapbox/streets-v11'\n    }).addTo(this.map);\n\n\n   \n\n    this.map.on('contextmenu',e => {\n      console.log('rightClick' , e)\n\n      this.field.lat = e.latlng.lat;\n      this.field.lng = e.latlng.lng;\n\n      this.addNewMarker();\n\n    });\n\n\n   \n/*\n    Leaflet.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: 'futbol8alem.com',\n    }).addTo(this.map);\n*/\n    //Leaflet.marker([28.6, 77]).addTo(this.map).bindPopup('Delhi').openPopup();\n    //Leaflet.marker([34, 77]).addTo(this.map).bindPopup('Leh').openPopup();\n\n    \n\n    this.loadFields();\n  }\n\n  addNewMarker(){\n\n    if(this.newMarker)\n        this.map.removeLayer(this.newMarker);\n      \n    const myCustomColour = '#35da7f'\n\n    const markerHtmlStyles = `\n      background-color: ${myCustomColour};\n      width: 2rem;\n      height: 2rem;\n      display: block;\n      left: -1.5rem;\n      top: -1.5rem;\n      position: relative;\n      border-radius: 3rem 3rem 0;\n      transform: rotate(45deg);\n      border: 1px solid #FFFFFF`\n\n    const icon = Leaflet.divIcon({\n      className: \"my-custom-pin\",\n      iconAnchor: [0, 24],\n      labelAnchor: [-6, 0],\n      popupAnchor: [0, -36],\n      html: `<span style=\"${markerHtmlStyles}\" />`\n    })\n\n\n    this.newMarker = Leaflet.marker([this.field.lat , this.field.lng],{\n      draggable : true,\n      alt : 'Nueva Cancha',\n      shadowPane : 'Pane',\n      icon : icon,\n      title : 'Arrastra bara canbiar la ubicación.'\n      })\n    .addTo(this.map);\n\n    this.newMarker.on('dragend', (event) => {\n      var marker = event.target;\n      var position = marker.getLatLng();\n\n      this.field.lat = position.lat;\n      this.field.lng = position.lng;\n\n      marker.openPopup();\n      console.log('change pos' , this.field)\n\n      \n  });\n\n    this.newMarker.bindPopup(this.field.name,{autoPan:false})\n                  .openPopup();\n  }\n\n\n  async loadFields(){\n\n    if(! this.id)\n      this.modelField.api_function('markers').subscribe(\n        response => {\n          if(response['status'] == 'success'){\n            if(response['data']){\n              response['data'].forEach(element => {\n                this.addMarker( parseFloat(element.lat),parseFloat( element.lng) ,element.name);\n              });\n            }\n          }\n          this.map.setView([this.field.lat,this.field.lng], 11);  \n        },\n        error => {\n\n        }\n      )\n  }\n\n  addMarker(lat,lng,title){\n\n    var Icono = Leaflet.icon({\n      iconUrl: \"http://icons.iconseeker.com/png/fullsize/sport-fields/football-field.png\",\n      iconSize: [30, 40],\n      iconAnchor: [15, 40],\n      shadowSize: [35, 50],\n      shadowAnchor: [0, 55],\n      popupAnchor: [0, -40]});\n\n    if(lat != 0 && lng != 0)\n      Leaflet.marker([lat, lng],{icon:Icono}).addTo(this.map).bindTooltip(title,{permanent : true}).openTooltip()\n      //.bindPopup(title,{autoPan:false}).openPopup();\n\n  }\n\n\n  inputVal(val){\n    this.field.name = val;\n\n    if(this.newMarker){\n      this.newMarker._popup.setContent(val,{autoPan:false})\n\n    }\n  }\n\n  regresh(){\n    this.map.invalidateSize();\n  }\n\n  reset(){\n \n    \n    if(this.map){\n      this.map.off();\n      this.map.remove();\n    }\n  }\n  \n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2ZpZWxkL2xpc3QtZmllbGRzL2xpc3QtZmllbGRzLnBhZ2Uuc2NzcyJ9 */\";","import { Component, OnInit } from '@angular/core';\nimport { Model } from 'src/app/api/models/model';\nimport { RequestService } from 'src/app/api/request.service';\nimport { IonItem, ModalController } from '@ionic/angular';\nimport { DialogService } from 'src/app/api/util/dialog.service';\nimport { UtilArrayService } from 'src/app/services/util-array.service';\nimport { UtilService } from 'src/app/services/util.service';\nimport { FieldFormPage } from '../field-form/field-form.page';\nimport { ModalForm } from 'src/app/models/modal-form';\nimport { PlatformLocation } from '@angular/common';\nimport { AuthUserService } from 'src/app/services/auth-user.service';\n\nimport * as Leaflet from 'leaflet';\nimport { ShowPage } from '../show/show.page';\nimport { NavParams } from 'node_modules_3/@ionic/angular';\nimport { TransferDataService } from 'src/app/services/transfer-data.service';\n\n\n@Component({\n  selector: 'app-list-fields',\n  templateUrl: './list-fields.page.html',\n  styleUrls: ['./list-fields.page.scss'],\n})\nexport class ListFieldsPage extends ModalForm implements OnInit , ModalForm {\n\n\n  segment_select = 'list';\n  fields = [];\n  oldFields = [];\n  markers = [];\n\n  modelField : Model;\n  public canEdit = false;\n\n  map: Leaflet.Map;\n\n  isSelect = false;\n\n\n  constructor(\n    public requestService : RequestService,\n    public dialogService : DialogService,\n    public modalController : ModalController,\n    public utilArray : UtilArrayService,\n    public util : UtilService,\n    location: PlatformLocation,\n    public viewCtrl: ModalController,\n    public dialog : DialogService,\n    public authUser : AuthUserService,\n    public transfDat : TransferDataService\n  \n  ) {\n    super(location,viewCtrl)\n    this.modelField =  new Model('Field',requestService);\n\n    this.isSelect = transfDat.getData('isSelect');\n    transfDat.clear();\n\n    //this.isSelect = navParams.get('isSelect') ;\n\n   }\n\n  ngOnInit() {\n\n    //this.util.setScript('https://maps.googleapis.com/maps/api/js?key=AIzaSyA_uVKWprjIgPURNhl1v9zzTPLQJIBdi6I');\n    this.init();\n\n  }\n\n  async init(){\n    await this.dialogService.loadingProgres();\n\n    this.modelField.api_function('pageAllFields').subscribe(\n      response => {\n        if(response['status'] == 'success'){\n          this.fields = response['data'];\n          this.oldFields = this.fields;\n        }\n\n        this.leafletMap();\n        this.dialogService.dimissLoaging();\n      },\n      error => {\n        this.dialogService.dimissLoaging();\n        this.dialogService.showToast('Error al obtener Campos','','warning');\n      }\n    )\n  }\n\n\n  async add() {\n    const modal = await this.modalController.create({\n      component: FieldFormPage ,\n    });\n\n    modal.onDidDismiss().then(data=>{\n      if(data['data'] && data.data['field']){\n        const field = data.data['field'];\n        this.utilArray.listAddFirst(this.fields,field);\n      }\n    })\n\n    return await modal.present();\n   }\n\n   filterField(event){\n     \n\n    let text = event.target.value;\n    if(text.length <= 0){\n      this.fields = this.oldFields;\n      this.loadFields();\n      return;\n    }\n\n    this.fields = [... this.oldFields];\n\n    this.fields = this.fields.filter(field => field.name.toUpperCase().includes(text.toUpperCase()));\n\n    this.loadFields();\n\n  }\n\n  cancelFilter($event){\n    this.fields = this.oldFields;\n  }\n\n  dismiss(field) {\n    this.viewCtrl.dismiss(\n      {\n        field : field,\n      }\n    );\n  }\n\n  close(){\n    this.viewCtrl.dismiss();\n  }\n\n  confirmDelete(field,$event){\n    $event.stopPropagation();\n\n    this.dialog.presentAlertConfirm('Confirmar','Estas seguro de eliminar esta cancha',e => {\n      this.delete(field)\n    });\n   }\n\n   delete(field){\n     this.modelField.api_delete(field.id).subscribe(data => {\n       console.log(data);\n       if(data['status'] == 'success'){\n         this.dialog.showToast('Cancha Eliminada',null,'success');\n         this.utilArray.listDelete(this.fields,field.id)\n       }\n     });\n   }\n\n   async showEdit(field,$event){\n     console.log('showEdit')\n    $event.stopPropagation();\n\n    const modal = await this.modalController.create({\n      component: FieldFormPage ,\n      componentProps: { id: field.id }\n    });\n\n    modal.onDidDismiss().then(data=>{\n      if(data.data && data.data['field']){\n        const field = data.data['field'];\n        this.utilArray.listUpdate(this.fields,field.id,field)\n      }\n    })\n\n    return await modal.present();\n   }\n\n  async show(field,$event){\n    if(this.isSelect)\n      return;\n\n    console.log('show')\n   $event.stopPropagation();\n\n   const modal = await this.modalController.create({\n     component: ShowPage ,\n     componentProps: { id: field.id }\n   });\n\n   modal.onDidDismiss().then(data=>{\n     if(data.data && data.data['field']){\n       //const field = data.data['field'];\n       //this.utilArray.listUpdate(this.fields,field.id,field)\n     }\n   })\n\n   return await modal.present();\n  }\n\n   segmentChanged(event){\n    //console.log(event);\n    this.segment_select = event.detail.value;\n    setTimeout(()=>{\n      this.regresh();\n\n    },100)\n   }\n\n\n   \n  leafletMap() {\n\n    //this.reset();\n    let field = { \n      name : '',\n      lat : -27.603857971720405,\n      lng : -55.323644024643414\n    };  \n\n    this.map = Leaflet.map('mapId3');\n    \n    this.map.on(\"load\",() => { \n      console.log('load map')\n\n      setTimeout(() => {\n        console.log('refresh')\n      this.regresh();\n    }, 1000); });\n    \n    \n    this.map.setView([field.lat,field.lng], 11);\n\n    //old\n    Leaflet.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: 'futbol8alem.com',\n      id: 'mapbox/streets-v11'\n    }).addTo(this.map);\n\n\n\n   \n/*\n    Leaflet.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: 'futbol8alem.com',\n    }).addTo(this.map);\n*/\n    //Leaflet.marker([28.6, 77]).addTo(this.map).bindPopup('Delhi').openPopup();\n    //Leaflet.marker([34, 77]).addTo(this.map).bindPopup('Leh').openPopup();\n\n    \n\n    this.loadFields();\n  }\n\n\n  loadFields(){\n\n    this.markers.forEach(el => {\n      if(this.map)\n        this.map.removeLayer(el);\n    })\n\n    this.markers = [];\n\n  \n    this.fields.forEach(element => {\n      this.addMarker( parseFloat(element.lat),parseFloat( element.lng) ,element.name);\n    });\n\n    this.regresh();\n  }\n\n  addMarker(lat,lng,title){\n\n    var Icono = Leaflet.icon({\n      iconUrl: \"http://icons.iconseeker.com/png/fullsize/sport-fields/football-field.png\",\n      iconSize: [30, 40],\n      iconAnchor: [15, 40],\n      shadowSize: [35, 50],\n      shadowAnchor: [0, 55],\n      popupAnchor: [0, -40]});\n\n    if(lat != 0 && lng != 0){\n      var m = Leaflet.marker([lat, lng],{icon:Icono}).addTo(this.map).bindTooltip(title,{permanent : true}).openTooltip()\n      //.bindPopup(title,{autoPan:false}).openPopup();\n      this.markers.push(m);\n    }\n  }\n\n  reset(){\n    if(this.map){\n      this.map.off();\n      this.map.remove();\n    }\n  }\n\n  regresh(){\n    this.map.invalidateSize();\n  }\n\n}\n"]}