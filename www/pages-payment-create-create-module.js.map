{"version":3,"sources":["./src/app/pages/payment/create/create.page.html","./src/app/pages/payment/create/create-routing.module.ts","./src/app/pages/payment/create/create.module.ts","./src/app/pages/payment/create/create.page.scss","./src/app/pages/payment/create/create.page.ts"],"names":[],"mappings":"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","file":"pages-payment-create-create-module.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>Realizar Pago</ion-title>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"team/profile/{{team_id}}\\\"></ion-back-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  \\n  <ion-card *ngIf=\\\"!planSelect\\\">\\n    <ion-card-content>\\n      <ion-list>\\n\\n        <ion-list-header  lines=\\\"inset\\\" color=\\\"secondary\\\">\\n          <ion-label>Planes</ion-label>\\n        </ion-list-header>\\n\\n        <ion-item *ngFor=\\\"let plan of plans\\\"  button (click)=\\\"selectPlan(plan)\\\">\\n          <h3>\\n          {{plan.name}}\\n          </h3>\\n          <ion-badge color=\\\"secondary\\\" class=\\\"float-left\\\" slot=\\\"end\\\">\\n            <h3>${{plan.amount}}</h3>\\n          </ion-badge>\\n        </ion-item>\\n      </ion-list>\\n      \\n    </ion-card-content>\\n\\n  </ion-card>\\n\\n  <ion-card *ngIf=\\\"payment && planSelect\\\">\\n    <ion-card-content>\\n\\n      <div class=\\\"ion-text-center\\\">\\n        <h2 class=\\\"sub\\\">Suscripción de:</h2>\\n        <br>\\n        <ion-avatar slot=\\\"start\\\" style=\\\"margin: auto;\\\">\\n          <ion-img \\n            [src]=\\\"payment.team.shield ? payment.team.shield.urlCompleteThumb : 'assets/images/esc.png'\\\">\\n          </ion-img>\\n        </ion-avatar>\\n        <br>\\n        <ion-text class=\\\"team\\\" color=\\\"dark\\\"> {{payment.team.name}}</ion-text>\\n        <br>\\n      </div>\\n\\n     \\n\\n      <ion-item-group>\\n        <ion-item-divider>\\n          <ion-label>Detalle</ion-label>\\n        </ion-item-divider>\\n      \\n        <ion-item>\\n          <ion-label>\\n            <ion-text>Valor:</ion-text>\\n            <ion-text class=\\\"ion-float-right\\\">${{payment.amount}}</ion-text>\\n          </ion-label>\\n        </ion-item>\\n       \\n        <ion-item>\\n          <ion-label>\\n            <ion-text>Creado:</ion-text>\\n            <ion-text class=\\\"ion-float-right\\\">{{util.setFormatMoment(payment.created_at)}}</ion-text>\\n          </ion-label>\\n        </ion-item>\\n\\n        <ion-item *ngIf=\\\"payment.detail\\\" >\\n          <div class=\\\"ion-text-center\\\" color=\\\"medium\\\" > \\n            {{ payment.detail }}\\n          </div>\\n        </ion-item>\\n\\n      </ion-item-group>\\n\\n      <br>\\n\\n      <ion-item-group>\\n        <ion-item-divider>\\n          <ion-label>Período de suscripción</ion-label>\\n        </ion-item-divider>\\n      \\n        <ion-item>\\n          <ion-label>\\n            <ion-text>Inicio:</ion-text>\\n            <ion-text class=\\\"ion-float-right\\\">{{util.setFormatMoment(payment.start)}}</ion-text>\\n          </ion-label>\\n        </ion-item>\\n\\n        <ion-item>\\n          <ion-label>\\n            <ion-text>Fin:</ion-text>\\n            <ion-text class=\\\"ion-float-right\\\">{{util.setFormatMoment(payment.end)}}</ion-text>\\n          </ion-label>\\n        </ion-item>\\n      </ion-item-group>\\n\\n      <br>\\n\\n      <ion-item-group >\\n        <ion-item-divider>\\n          <ion-label class=\\\"ion-text-center\\\">Estado</ion-label>\\n        </ion-item-divider>\\n      \\n        <ion-item>\\n          <ion-label>\\n            {{status}}\\n          </ion-label>\\n        </ion-item>\\n\\n      </ion-item-group>\\n\\n      <br *ngIf=\\\"noPaid\\\">\\n\\n      <ion-item-group *ngIf=\\\"noPaid\\\" >\\n        <ion-item-divider>\\n          <ion-label class=\\\"ion-text-center\\\">Información </ion-label>\\n        </ion-item-divider>\\n      \\n        <ion-item>\\n          <ion-label>\\n            \\n          </ion-label>\\n        </ion-item>\\n\\n      </ion-item-group>\\n      <br>\\n\\n\\n      <br *ngIf=\\\"isFailure\\\">\\n      <ion-item-group *ngIf=\\\"isFailure\\\" >\\n        <ion-item-divider>\\n          <ion-label class=\\\"ion-text-center\\\">Error</ion-label>\\n        </ion-item-divider>\\n      \\n        <ion-item>\\n          <ion-label>\\n            El pago no ha finalizado correctamente.\\n          </ion-label>\\n        </ion-item>\\n\\n        <ion-item >\\n          <ion-button routerLink=\\\"/payment/create/{{payment.team.id}}\\\"  >Generar nuevo pago</ion-button>\\n        </ion-item>\\n\\n      </ion-item-group>\\n\\n\\n      <br *ngIf=\\\"isApproved\\\">\\n      <ion-item-group *ngIf=\\\"isApproved\\\">\\n        <ion-item-divider>\\n          <ion-label>Suscripción paga</ion-label>\\n        </ion-item-divider>\\n      \\n        <ion-item>\\n          <ion-label>\\n            <ion-text>inicio:</ion-text>\\n            <ion-text class=\\\"ion-float-right\\\">{{util.setFormatMoment(payment.start)}}</ion-text>\\n          </ion-label>\\n        </ion-item>\\n        <ion-item>\\n          <ion-label>\\n            <ion-text>Fin:</ion-text>\\n            <ion-text class=\\\"ion-float-right\\\" >{{util.setFormatMoment(payment.end)}}</ion-text>\\n          </ion-label>\\n        </ion-item>\\n\\n        <ion-item>\\n          <ion-text>\\n            Durante este periodo los administradores podrán gestionar los datos de este Equipo. Recibirán una notificación días previos a la fecha de vencimiento. \\n          </ion-text>\\n        </ion-item>\\n\\n      </ion-item-group>\\n\\n\\n\\n\\n      <br *ngIf=\\\"isApproved\\\">\\n      <ion-item-group *ngIf=\\\"isApproved\\\">\\n\\n        <ion-item-divider>\\n          <ion-label>Mercado Pago</ion-label>\\n        </ion-item-divider> \\n\\n        <ion-item>\\n          <ion-label>\\n            <ion-text>Pago:</ion-text>\\n            <ion-text class=\\\"ion-float-right\\\">{{payment.payment_id}}</ion-text>\\n          </ion-label>\\n        </ion-item>\\n\\n        <ion-item>\\n          <ion-label>\\n            <ion-text>Orden:</ion-text>\\n            <ion-text class=\\\"ion-float-right\\\">{{payment.order_id}}</ion-text>\\n          </ion-label>\\n        </ion-item>\\n\\n      </ion-item-group>\\n\\n      <br *ngIf=\\\"isApproved\\\">\\n      <ion-item-group *ngIf=\\\"isApproved\\\">\\n\\n        <ion-item-divider>\\n          <ion-label>Autor</ion-label>\\n        </ion-item-divider> \\n\\n        <ion-item>\\n          <ion-label class=\\\"ion-text-center\\\">\\n            <ion-avatar slot=\\\"start\\\" style=\\\"margin: auto;\\\">\\n              <ion-img \\n                [src]=\\\"payment.user.photo ? payment.user.photo.urlCompleteThumb : 'assets/images/user.png'\\\">\\n              </ion-img>\\n            </ion-avatar>\\n\\n            {{payment.user.completeName}}\\n          </ion-label>\\n        </ion-item>\\n\\n      </ion-item-group>\\n\\n\\n      <div *ngIf=\\\"noPaid\\\">\\n        <app-btn-paid\\n          (onBack)=\\\"changePlan()\\\"\\n          (onClose)=\\\"close()\\\"\\n          textBack = \\\"Cambiar plan\\\"\\n          [preference_id] = \\\"payment.preference_id\\\"\\n        ></app-btn-paid>\\n      </div>\\n\\n    </ion-card-content>\\n  </ion-card>\\n\\n\\n</ion-content>\\n\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CreatePage } from './create.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CreatePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CreatePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CreatePageRoutingModule } from './create-routing.module';\n\nimport { CreatePage } from './create.page';\nimport {ComponentsModule} from '../../../components/components.module';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CreatePageRoutingModule,\n    ComponentsModule\n  ],\n  declarations: [CreatePage]\n})\nexport class CreatePageModule {}\n","export default \".sub {\\n  font-size: larger;\\n  margin-bottom: 10px;\\n}\\n\\n.team {\\n  font-size: x-large;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvcGF5bWVudC9jcmVhdGUvY3JlYXRlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGlCQUFBO0VBQ0EsbUJBQUE7QUFDSjs7QUFFQTtFQUNLLGtCQUFBO0FBQ0wiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9wYXltZW50L2NyZWF0ZS9jcmVhdGUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnN1YntcbiAgICBmb250LXNpemU6IGxhcmdlcjtcbiAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xufVxuXG4udGVhbXtcbiAgICAgZm9udC1zaXplOiB4LWxhcmdlO1xufSJdfQ== */\";","import { Component, OnInit } from '@angular/core';\nimport { Model } from 'src/app/api/models/model';\nimport { RequestService } from 'src/app/api/request.service';\nimport { ActivatedRoute } from '@angular/router';\nimport { DialogService } from 'src/app/api/util/dialog.service';\nimport {environment} from 'src/environments/environment';\nimport { UtilService } from 'src/app/services/util.service';\nimport { NavController } from '@ionic/angular';\n\n\n@Component({\n  selector: 'app-create',\n  templateUrl: './create.page.html',\n  styleUrls: ['./create.page.scss'],\n})\nexport class CreatePage implements OnInit {\n\n\n  public modelPayment : Model;\n  public team_id : any;\n  public payment : any;\n  public plans = [];\n  public planSelect = false;\n\n  constructor(\n    public request : RequestService,\n    public route : ActivatedRoute,\n    public dialogService : DialogService,\n    public util : UtilService,\n    private navCtrl: NavController\n\n  ) { \n\n    this.modelPayment = new Model(\"Payment\",request);\n    this.team_id = this.route.snapshot.paramMap.get('team_id');\n\n  }\n\n  ngOnInit() {\n    this.loadPlans();\n    //this.preferenceApi();\n  }\n\n\n  async loadPlans(){\n    await this.dialogService.loadingProgres();\n\n    this.modelPayment.api_function('api_getPlans').subscribe(\n      (response : any) =>{\n        if(response.status == 'success'){\n          Object.values(response.data).forEach((element )=> {\n            this.plans.push(element);\n          });\n          \n        }else{\n          alert('Error al obtener Planes');\n        }\n      },\n      error => {\n        this.dialogService.dimissLoaging();\n      },() => {\n        this.dialogService.dimissLoaging();\n      }\n    )\n\n  }\n\n  async preferenceApi(plan){\n    await this.dialogService.loadingProgres();\n\n    console.log('preference api')\n      this.modelPayment.api_function('findPaymentTeam',{team_id : this.team_id,plan_id : plan.id}).subscribe(\n        response => {\n          this.dialogService.dimissLoaging();\n          console.log(response);\n          if(response['status'] == 'success'){\n            this.payment = response['data'];\n          }\n        },\n        error => {\n          this.dialogService.dimissLoaging();\n          console.error(error)\n        }  \n      )\n  }\n\n\n\nget isApproved(){\n  return this.payment ? this.payment.status == 'approved' : false;\n}\n\nget noPaid(){\n  return this.payment ? ( this.payment.status == 'created' || this.payment.status == 'pending' ) : false ;\n}\n\nget isFailure(){\n  return this.payment ? this.payment.status == 'rejected'  : false;\n}\n\nget status(){\n\n  if(! this.payment)\n    return '';\n\n  switch (this.payment.status) {\n    case 'created' : \n      return 'Pendiente';\n\n    case 'pending': \n      return 'Pendiente  de pago';\n    \n    case 'approved' : \n      return 'Pagado';\n    \n    case 'rejected' :\n      return 'Pago rechazado';\n  }\n\n}\n\nselectPlan(plan){\n  this.planSelect = true;\n  this.preferenceApi(plan);\n}\n\nchangePlan(){\n  this.payment = null \n  this.planSelect = ! this.planSelect;\n}\n\n\nclose(){\n  this.navCtrl.back();\n}\n\n}\n"],"sourceRoot":"webpack:///"}