{"version":3,"sources":["webpack:///src/app/pages/player/player-form/player-form.page.html","webpack:///src/app/pages/player/player-form/player-form.page.scss","webpack:///src/app/pages/player/player-form/player-form.page.ts"],"names":["PlayerFormPage","request","dialogService","viewCtrl","navParams","modalController","authUser","alertController","router","location","chatService","util","isUser","canEditUser","servicePosition","servicePlayer","console","log","id","get","team_id","photoModel","setAspectRatioCrop","init","setElementImg","player","api_all","loadingProgres","api_find","subscribe","data","photo","setImage","user_id","dimissLoaging","error","isLoadPthoto","savePhoto","savePlayer","dismiss","uploadImage","image","photo_id","showToast","birth_date","setFormatMoment","api_update","api_create","create","component","componentProps","cancellable","model","multiple","modal","onDidDismiss","then","user","email","text","userWithPlayer","present","cssClass","header","message","buttons","role","handler","blah","navigateByUrl","close","alert","isAdmin","selector","template"],"mappings":"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","file":"default~pages-player-list-list-module~pages-player-player-form-player-form-module~pages-player-profi~8fa66a7a-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>Jugador</ion-title>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button color=\\\"dark\\\" (click)=\\\"close()\\\">\\n          <ion-icon name=\\\"arrow-back\\\"></ion-icon>\\n      </ion-button>\\n  </ion-buttons>\\n  <ion-buttons slot=\\\"secondary\\\">\\n    <ion-button *ngIf=\\\"chatService.isInit\\\" (click)=\\\"chatService.toggle()\\\" [color]=\\\"chatService.isVisible ? 'success' : ''\\\">\\n      <ion-icon name=\\\"help-circle-outline\\\"></ion-icon>\\n    </ion-button>  \\n  </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n  <form (ngSubmit)=\\\"submit()\\\"  (keyup)=\\\"servicePlayer.errorsForm.clear()\\\" >\\n\\n\\n    <ion-item *ngIf=\\\"canEditUser\\\">\\n      <ion-label position=\\\"floating\\\" >Usuario</ion-label>\\n      <ion-input type=\\\"text\\\" [value]=\\\"userSelect\\\" name=\\\"email\\\" (click)=\\\"selectUser()\\\"></ion-input>\\n      <ion-input type=\\\"hidden\\\" [(ngModel)]=\\\"player.user_id\\\" name=\\\"user_id\\\"></ion-input>\\n    </ion-item>\\n    <div style=\\\"color: red; padding-top: 0.2rem\\\" >{{ servicePlayer.errorsForm.get('user_id') }}</div>\\n\\n    <div class=\\\"ion-text-center\\\">\\n      <img id=\\\"img_photo\\\"  [src]=\\\"photoModel.photo.getPath()\\\" >\\n      <div class=\\\"ion-text-center\\\">\\n        <ion-button   size=\\\"small\\\" color=\\\"tertiary\\\" (click)=\\\"photoModel.addOneNewToGallery()\\\">{{photoModel.isLoadPthoto() ? 'Modificar' : 'Seleccionar Imagen' }}</ion-button>\\n      </div>\\n    </div>\\n\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\" >Nombre</ion-label>\\n      <ion-input type=\\\"text\\\" [(ngModel)]=\\\"player.name\\\" name=\\\"name\\\"></ion-input>\\n    </ion-item>\\n    <div style=\\\"color: red; padding-top: 0.2rem\\\" >{{ servicePlayer.errorsForm.get('name') }}</div>\\n\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\" >Fecha de nacimiento</ion-label>\\n      <ion-datetime [(ngModel)]=\\\"player.birth_date\\\" name=\\\"birth_date\\\"    displayFormat=\\\"DD-MM-YYYY\\\" ></ion-datetime>\\n    </ion-item>\\n    <div style=\\\"color: red; padding-top: 0.2rem\\\" >{{ servicePlayer.errorsForm.get('birth_date') }}</div>\\n\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\" >Apodo</ion-label>\\n      <ion-input type=\\\"text\\\" [(ngModel)]=\\\"player.nick\\\" name=\\\"nick\\\"></ion-input>\\n    </ion-item>\\n    <div style=\\\"color: red; padding-top: 0.2rem\\\" >{{ servicePlayer.errorsForm.get('nick') }}</div>\\n\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\" >Numero</ion-label>\\n      <ion-input type=\\\"text\\\" [(ngModel)]=\\\"player.number\\\" name=\\\"number\\\"></ion-input>\\n    </ion-item>\\n    <div style=\\\"color: red; padding-top: 0.2rem\\\" >{{ servicePlayer.errorsForm.get('number') }}</div>\\n\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\" >Altura</ion-label>\\n      <ion-input type=\\\"text\\\" [(ngModel)]=\\\"player.height\\\" name=\\\"height\\\"></ion-input>\\n    </ion-item>\\n    <div style=\\\"color: red; padding-top: 0.2rem\\\" >{{ servicePlayer.errorsForm.get('height') }}</div>\\n\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\" >Peso</ion-label>\\n      <ion-input type=\\\"text\\\" [(ngModel)]=\\\"player.weight\\\" name=\\\"weight\\\"></ion-input>\\n    </ion-item>\\n    <div style=\\\"color: red; padding-top: 0.2rem\\\" >{{ servicePlayer.errorsForm.get('weight') }}</div>\\n\\n\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">Posicion</ion-label>\\n      <ion-select [(ngModel)]=\\\"player.position_id\\\" name=\\\"position_id\\\">\\n        <ion-select-option [value]=\\\"pos.id\\\" *ngFor=\\\"let pos of servicePosition.list\\\">{{ pos.name }}</ion-select-option>\\n      </ion-select>\\n      <div style=\\\"color: red; padding-top: 0.2rem\\\" >{{ servicePlayer.errorsForm.get('position_id') }}</div>\\n    </ion-item>\\n\\n    <div class=\\\"ion-text-center ion-margin-top\\\" >\\n      <ion-text color=\\\"danger\\\" *ngIf=\\\"!(isAutor || canEditUser )\\\" >\\n        Este Jugador ya tiene asignado un administrador, solo él puede modificar los datos.\\n      </ion-text>   \\n    </div>\\n   \\n    <ion-button type=\\\"submit\\\"  expand=\\\"block\\\" [disabled]=\\\" !(isAutor || canEditUser ) \\\" class=\\\"ion-margin\\\">\\n      Guardar\\n    </ion-button>\\n   \\n  </form>\\n</ion-content>\\n\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3BsYXllci9wbGF5ZXItZm9ybS9wbGF5ZXItZm9ybS5wYWdlLnNjc3MifQ== */\";","import { Component, OnInit } from '@angular/core';\n\nimport {RequestService} from '../../../api/request.service';\nimport { ModalController, NavParams, AlertController } from '@ionic/angular';\nimport { PhotoService } from 'src/app/services/photo.service';\nimport { Model } from 'src/app/api/models/model';\nimport { DialogService } from 'src/app/api/util/dialog.service';\nimport { ModelImage } from 'src/app/api/models/modelImage';\nimport { SearchPage } from '../../search/search.page';\nimport { AuthUserService } from 'src/app/services/auth-user.service';\nimport { Router } from '@angular/router';\nimport { ModalForm } from 'src/app/models/modal-form';\nimport { ModalFormInterface } from 'src/app/interfaces/modal-form-interface';\nimport { PlatformLocation } from '@angular/common';\nimport { ChatService } from 'src/app/services/chat.service';\nimport { UtilService } from 'src/app/services/util.service';\n\n@Component({\n  selector: 'app-player-form',\n  templateUrl: './player-form.page.html',\n  styleUrls: ['./player-form.page.scss'],\n})\nexport class PlayerFormPage extends ModalForm implements OnInit , ModalFormInterface {\n\n  public servicePlayer : Model;\n  public servicePosition : Model;\n  public player : any;\n  public id : any;\n  public team_id : any;\n  public photoModel : ModelImage;\n  public isUser = false;\n  public canEditUser = true;\n\n  constructor(\n    public request : RequestService,\n    public dialogService : DialogService,\n    public viewCtrl: ModalController,\n    navParams: NavParams,\n    public modalController: ModalController,\n    public authUser : AuthUserService,\n    public alertController: AlertController,\n    public router : Router,\n    location: PlatformLocation,\n    public chatService : ChatService,\n    public util : UtilService\n\n  ) {\n    super(location,viewCtrl);\n    this.servicePosition = new Model('Position',request);\n    this.servicePlayer = new Model('Player',request);\n    console.log('ver');\n    this.id = navParams.get('id');\n    this.team_id = navParams.get('team_id');\n    this.isUser = navParams.get('isUser');\n\n\n    this.photoModel = new ModelImage(request,viewCtrl);\n    this.photoModel.setAspectRatioCrop('1 / 1');\n    this.photoModel.init('images/players/profile/',true,'assets/images/jugador.png');\n    this.photoModel.setElementImg('img_photo');\n\n   }\n\n\n  async initObject(){\n    this.player = {\n       'name' :'',\n        'nick':'',\n        'birth_date':'',\n        'number':1,\n        'height':0,\n        'weight' :0,\n        'position_id':'',\n        'team_id' : this.team_id,\n        'photo_id' : ''\n      };\n\n    this.servicePosition.api_all();\n\n    if(this.id){\n      await this.dialogService.loadingProgres(null);\n      this.servicePlayer.api_find(this.id).subscribe(data => {\n        if(data['status'] == 'success'){\n          this.player = data['Player'];\n          if(this.player.photo)\n            this.photoModel.setImage( this.player.photo)\n\n          this.canEditUser = (this.player && !this.player.user_id);\n          this.dialogService.dimissLoaging();\n        }\n      },\n      error => {\n        this.dialogService.dimissLoaging();\n      })\n    }\n  }\n\n  async submit(){\n\n    if(this.photoModel.isLoadPthoto()){\n      this.savePhoto();\n      return;\n    }\n\n    this.savePlayer()\n  }\n\n  dismiss(player) {\n    this.viewCtrl.dismiss(\n      {\n        player : player,\n      }\n    );\n  }\n\n  close(){\n    this.viewCtrl.dismiss();\n  }\n\n  async savePhoto(){\n    this.dialogService.loadingProgres('Subiendo foto...');\n\n    await this.photoModel.uploadImage().subscribe( \n      data => {\n        if(data['status'] == 'success'){\n          let image = data['Image'];\n          this.player.photo_id = image.id;\n          this.savePlayer()\n          this.dialogService.dimissLoaging();\n        }\n      },\n      error => {\n        this.dialogService.dimissLoaging();\n        this.dialogService.showToast('Error al subir Portada','Error','danger');\n        //this.submit();\n      })\n\n  }\n\n  savePlayer(){\n\n    this.player.birth_date = this.util.setFormatMoment(this.player.birth_date , 'YYYY-MM-DD')\n\n    if(this.player.id){\n      this.dialogService.loadingProgres('Procesando, espere..');\n\n      this.servicePlayer.api_update(this.player).subscribe(data => {\n        if(data['status'] == 'success'){\n          this.dialogService.showToast( data['msjSuccess'] ?? 'Registrado' );\n          this.dismiss(data['Player'])\n          this.dialogService.dimissLoaging();\n\n        }\n      },\n      error => {\n        this.dialogService.dimissLoaging();\n      });\n\n    }else{\n      this.dialogService.loadingProgres('Procesando, espere..');\n\n      this.servicePlayer.api_create(this.player).subscribe(data => {\n        if(data['status'] == 'success'){\n          this.dialogService.showToast( data['msjSuccess'] ?? 'Registrado' );\n          this.dismiss(data['Player'])\n          this.dialogService.dimissLoaging();\n\n        }\n    },\n    error => {\n      this.dialogService.dimissLoaging();\n    })\n    }\n  }\n\n  async selectUser(){\n    //e.preventDefault();\n    console.log('Add admins');\n\n    const modal = await this.modalController.create({\n      component: SearchPage ,\n      componentProps: { \n        cancellable: false,\n        model : 'User',\n        function : 'searchUser',\n        multiple : false\n      }\n    });\n\n    modal.onDidDismiss().then(data=>{\n      const user = data.data ?  data.data['item'] : null;\n      if(user){\n        if(!user.player){\n          this.player.user_id =  user.id;\n          this.player.email = user.text\n        }else{\n          this.userWithPlayer(user);\n        }\n      }\n     \n    })\n\n    return await modal.present();\n  }\n\n  async userWithPlayer(user){\n    const alert = await this.alertController.create({\n      cssClass: 'my-custom-class',\n      header: 'Atención',\n      message: `<b>${user.text}</b> ya tiene asociado un jugador. Puedes enviarle una solicitud para que se incorpore a este equipo.`,\n      buttons: [\n        {\n          text: 'Cancelar',\n          role: 'cancel',\n          cssClass: 'secondary',\n          handler: (blah) => {\n            console.log('Confirm Cancel: blah');\n          }\n        }, {\n          text: 'Solicitar',\n          handler: () => {\n            console.log('Confirm Okay');\n            this.router.navigateByUrl(`team-request/${this.team_id}/${user.player.id}`);\n            this.close();\n          }\n        }\n      ]\n    });\n\n    await alert.present();\n  }\n\n\n  get isAutor(){\n    return this.player && this.authUser.user.id == this.player.user_id;\n  }\n\n  get isAdminGeneral(){\n    return this.authUser.isAdmin;\n  }\n\n  get userSelect(){\n    return this.player.user_id ? (this.player.user ? this.player.user.email : this.player.email) : '';\n  }\n\n}\n"]}