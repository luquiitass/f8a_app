(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"6/gD":function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var n=i("mrSG"),o=i("gcOT"),s=i("8xVP"),a=i("fXoL"),r=i("G/jy");const{Camera:l}=o.c;let c=(()=>{class t{constructor(t){this.photos=[],this.convertBlobToBase64=t=>new Promise((e,i)=>{const n=new FileReader;n.onerror=i,n.onload=()=>{e(n.result)},n.readAsDataURL(t)}),this.serviceImage=new s.a("Image",t)}init(t,e=!0,i="assets/images/pngwing.png"){this.url=null!=t?t:"/images/",this.thumb=null!=e&&e,this.path=i,this.photo=new d(i)}setImage(t){this.image=t,this.photo.image=t}addNewToGallery(){return Object(n.b)(this,void 0,void 0,(function*(){const t=yield l.getPhoto({resultType:o.a.Uri,source:o.b.Camera,quality:100}),e=yield this.readAsBase64(t);this.photos.unshift(new d(null,t.webPath,e,this.url,this.thumb))}))}addOneNewToGallery(){return Object(n.b)(this,void 0,void 0,(function*(){const t=yield l.getPhoto({resultType:o.a.Uri,source:o.b.Camera,quality:100}),e=yield this.readAsBase64(t);this.photo=new d(t.webPath,e,e,this.url,this.thumb,this.image)}))}isLoadPthoto(){return!!this.photo.data}readAsBase64(t){return Object(n.b)(this,void 0,void 0,(function*(){const e=yield fetch(t.webPath),i=yield e.blob();return yield this.convertBlobToBase64(i)}))}uploadImage(){if(this.isLoadPthoto())return this.photo.id?this.serviceImage.api_update(this.photo):this.serviceImage.api_create(this.photo)}}return t.\u0275fac=function(e){return new(e||t)(a.Ub(r.a))},t.\u0275prov=a.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class d{constructor(t="assets/images/pngwing.png",e=null,i="",n="",o=!1,s=null){this.id=s?s.id:"",this.webviewPath=e,this.filepath=t,this.data=i,this.url=n,this.thumb=o,this.image=s}getPath(){return this.webviewPath?this.webviewPath:this.image&&this.image.urlComplete?this.image.urlComplete:this.filepath}}},cGQY:function(t,e,i){"use strict";i.r(e),i.d(e,"GamesPageModule",(function(){return I}));var n=i("ofXK"),o=i("3Pt+"),s=i("TEn/"),a=i("tyNb"),r=i("mrSG"),l=i("8xVP"),c=i("wd/R"),d=i("z0x6"),b=i("fXoL"),h=i("G/jy"),u=i("2Rin"),g=i("vuFD"),m=i("y/q6"),f=i("rLe3"),p=i("T3jL"),v=i("QbbR");function w(t,e){if(1&t&&(b.Qb(0,"ion-segment-button",9),b.tc(1),b.Pb()),2&t){const t=e.$implicit,i=e.index,n=b.ac(2);b.gc("value",i),b.hc("id","sgm_",i,""),b.yb(1),b.vc(" ",n.formatDate(t.date)," ")}}function P(t,e){1&t&&(b.Qb(0,"ion-list-header",10),b.Qb(1,"ion-label"),b.tc(2,"Sin registros"),b.Pb(),b.Pb())}function y(t,e){if(1&t&&b.Mb(0,"app-game-list",11),2&t){const t=e.$implicit;b.hc("routerLink","/games/profile/",t.id,""),b.fc("game",t)}}function x(t,e){if(1&t){const t=b.Rb();b.Qb(0,"ion-item",12),b.Yb("click",(function(){return b.nc(t),b.ac(2).addGame()})),b.Qb(1,"ion-label"),b.tc(2,"Crear nuevo partido"),b.Pb(),b.Mb(3,"ion-icon",13),b.Mb(4,"ion-ripple-effect"),b.Pb()}}function L(t,e){if(1&t){const t=b.Rb();b.Qb(0,"div"),b.Qb(1,"ion-refresher",2),b.Yb("ionRefresh",(function(e){return b.nc(t),b.ac().init(e)})),b.Mb(2,"ion-refresher-content"),b.Pb(),b.Qb(3,"ion-list"),b.Qb(4,"ion-grid"),b.Qb(5,"ion-row"),b.Qb(6,"ion-col",3),b.Qb(7,"ion-segment",4),b.Yb("ngModelChange",(function(e){return b.nc(t),b.ac().tabSelected=e}))("ionChange",(function(e){return b.nc(t),b.ac().selectDate(e)})),b.sc(8,w,2,3,"ion-segment-button",5),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.sc(9,P,3,0,"ion-list-header",6),b.sc(10,y,1,2,"app-game-list",7),b.sc(11,x,5,0,"ion-item",8),b.Pb(),b.Pb()}if(2&t){const t=b.ac();b.yb(7),b.fc("ngModel",t.tabSelected),b.yb(1),b.fc("ngForOf",t.tabs),b.yb(1),b.fc("ngIf",0==t.listsHomeService.games.length),b.yb(1),b.fc("ngForOf",t.listsHomeService.games),b.yb(1),b.fc("ngIf",t.authUser.isAdminTeam())}}function Q(t,e){1&t&&(b.Qb(0,"ion-card"),b.Qb(1,"div",16),b.Qb(2,"div",17),b.Qb(3,"div",18),b.Qb(4,"div",19),b.Mb(5,"ion-skeleton-text",20),b.Qb(6,"ion-avatar",0),b.Mb(7,"ion-skeleton-text",21),b.Pb(),b.Pb(),b.Qb(8,"div",22),b.Mb(9,"ion-skeleton-text",23),b.Pb(),b.Qb(10,"div",19),b.Mb(11,"ion-skeleton-text",20),b.Qb(12,"ion-avatar",0),b.Mb(13,"ion-skeleton-text",21),b.Pb(),b.Pb(),b.Pb(),b.Qb(14,"div",24),b.Mb(15,"ion-skeleton-text",25),b.Pb(),b.Pb(),b.Pb(),b.Pb())}function M(t,e){if(1&t&&(b.Qb(0,"div"),b.Qb(1,"ion-grid"),b.Qb(2,"ion-row"),b.Qb(3,"ion-col"),b.Mb(4,"ion-skeleton-text",14),b.Pb(),b.Qb(5,"ion-col"),b.Mb(6,"ion-skeleton-text",14),b.Pb(),b.Qb(7,"ion-col"),b.Mb(8,"ion-skeleton-text",14),b.Pb(),b.Pb(),b.Pb(),b.sc(9,Q,16,0,"ion-card",15),b.Pb()),2&t){const t=b.ac();b.yb(9),b.fc("ngForOf",t.listSkeleton)}}const k=[{path:"",component:(()=>{class t{constructor(t,e,i,n,o,s,a,r){this.request=t,this.util=e,this.dialogService=i,this.modalCtrl=n,this.authUser=o,this.utilArray=s,this.route=a,this.listsHomeService=r,this.tabs=[],this.listSkeleton=new Array(3),this.firstLoad=!0,this.modelGame=new l.a("Game",t)}ngOnInit(){this.init(),this.analyzeParameters()}init(t=null){return Object(r.b)(this,void 0,void 0,(function*(){this.modelGame.api_function("pageHomeGames").subscribe(e=>{"success"==e.status&&(this.tabs=e.data.dates,this.selectFirst()),t&&t.target.complete(),console.log(e),this.firstLoad=!1},e=>{t&&t.target.complete(),console.error(e),this.firstLoad=!1})}))}selectFirst(){return Object(r.b)(this,void 0,void 0,(function*(){this.tabs.length>0&&(this.listsHomeService.games=this.tabs[0].results,this.tabSelected=0,yield this.delay(1500),this.focusSegment())}))}selectDate(t){return Object(r.b)(this,void 0,void 0,(function*(){let e=parseInt(t.detail.value),i=this.tabs[e];if(i&&i.results)return this.listsHomeService.games=i.results,void this.focusSegment();yield this.dialogService.loadingProgres(),this.modelGame.api_function("gamesByDate",{date:i.date}).subscribe(t=>{"success"==t.status&&(this.tabs[e].results=t.data,this.listsHomeService.games=this.tabs[e].results,this.focusSegment()),this.dialogService.dimissLoaging(),console.log(t)},t=>{console.error(t),this.dialogService.dimissLoaging()})}))}focusSegment(){let t="sgm_"+this.tabSelected;console.log("select segment : ",t),document.getElementById(t).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}delay(t){return new Promise(e=>setTimeout(e,t))}formatDate(t){return c(t).locale("es").format("DD MMMM YYYY")}addGame(){return Object(r.b)(this,void 0,void 0,(function*(){console.log("date",this.tabs[this.tabSelected]);let t=this.tabs[this.tabSelected]?this.tabs[this.tabSelected].date:"",e=yield this.modalCtrl.create({component:d.a,componentProps:{date:t}});return e.onDidDismiss().then(t=>{if(console.log("crate game"),t.data&&t.data.game){const e=t.data.game;let i=this.util.setFormatMoment(e.date,"YYYY-MM-DD"),n=this.tabs.map(t=>t.date).indexOf(i);n>=0||(n=this.tabs.length,this.tabs[n]={date:i,results:[]}),this.utilArray.listAddFirst(this.tabs[n].results,e),this.tabSelected=n,this.focusSegment()}}),yield e.present()}))}analyzeParameters(){let t=this.route.snapshot.queryParamMap.get("reload");console.log("reload:",t),t&&this.init()}ionViewWillEnter(){console.log("ionViewWillEnter")}ionViewDidEnter(){console.log("ionViewDidEnter")}ionViewWillLeave(){console.log("ionViewWillLeave")}ionViewDidLeave(){console.log("ionViewDidLeave")}}return t.\u0275fac=function(e){return new(e||t)(b.Lb(h.a),b.Lb(u.a),b.Lb(g.a),b.Lb(s.nb),b.Lb(m.a),b.Lb(f.a),b.Lb(a.a),b.Lb(p.a))},t.\u0275cmp=b.Fb({type:t,selectors:[["app-games"]],decls:9,vars:2,consts:[["slot","start"],[4,"ngIf"],["slot","fixed",3,"ionRefresh"],["size","12"],["scrollable","",3,"ngModel","ngModelChange","ionChange"],[3,"value","id",4,"ngFor","ngForOf"],["color","tertiary",4,"ngIf"],["routerDirection","forward",3,"game","routerLink",4,"ngFor","ngForOf"],["class","ion-activatable",3,"click",4,"ngIf"],[3,"value","id"],["color","tertiary"],["routerDirection","forward",3,"game","routerLink"],[1,"ion-activatable",3,"click"],["name","chevron-forward-outline"],["animated","",2,"width","100%","height","30px"],[4,"ngFor","ngForOf"],[1,"ion-padding","custom-skeleton"],[1,"game"],[1,"team-list","contenedor"],[1,"team"],["animated","",2,"width","80%"],["animated",""],[1,"vs"],["animated","",2,"width","20px"],[1,"date","ion-text-center",2,"width","100%"],["animated","",2,"width","80px","margin","auto"]],template:function(t,e){1&t&&(b.Qb(0,"ion-header"),b.Qb(1,"ion-toolbar"),b.Qb(2,"ion-buttons",0),b.Mb(3,"ion-menu-button"),b.Pb(),b.Qb(4,"ion-title"),b.tc(5,"Partidos"),b.Pb(),b.Pb(),b.Pb(),b.Qb(6,"ion-content"),b.sc(7,L,12,5,"div",1),b.sc(8,M,10,1,"div",1),b.Pb()),2&t&&(b.yb(7),b.fc("ngIf",!e.firstLoad),b.yb(1),b.fc("ngIf",e.firstLoad))},directives:[s.x,s.jb,s.j,s.K,s.hb,s.r,n.k,s.O,s.P,s.H,s.w,s.S,s.q,s.U,s.ub,o.d,o.g,n.j,s.V,s.I,s.G,v.a,s.tb,a.h,s.D,s.y,s.Q,s.Y,s.k,s.e],styles:[".team-list[_ngcontent-%COMP%]{display:block}.vs[_ngcontent-%COMP%]{width:6%}.game[_ngcontent-%COMP%]{width:100%;padding:10px;background-repeat:no-repeat;background-size:100%;font-size:small}.team[_ngcontent-%COMP%]{display:flex;align-items:center;width:47%;flex-flow:column-reverse}.team-name[_ngcontent-%COMP%]{margin-left:15px;margin-right:15px;width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.img-team[_ngcontent-%COMP%]{border-radius:50%;background-position:50%;width:30px;height:30px}.contenedor[_ngcontent-%COMP%]{margin:10px auto;display:flex;align-items:center;justify-content:center;width:100%;text-align:-webkit-center}.date[_ngcontent-%COMP%]{text-align:center}"]}),t})()}];let S=(()=>{class t{}return t.\u0275mod=b.Jb({type:t}),t.\u0275inj=b.Ib({factory:function(e){return new(e||t)},imports:[[a.j.forChild(k)],a.j]}),t})();var O=i("j1ZV");let I=(()=>{class t{}return t.\u0275mod=b.Jb({type:t}),t.\u0275inj=b.Ib({factory:function(e){return new(e||t)},imports:[[n.b,o.a,s.kb,S,O.a]]}),t})()},rLe3:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i("fXoL");let o=(()=>{class t{constructor(){}listAddLast(t,e){t.push(e)}listAddFirst(t,e){t.unshift(e)}listUpdate(t,e,i){let n=this.findIndexList(t,e);n>=0&&(t[n]=i)}listDelete(t,e){let i=this.findIndexList(t,e);i>=0&&t.splice(i,1)}findList(t,e){return t.find(t=>t.id===e)}findIndexList(t,e){return t.findIndex(t=>t.id===e)}updateAttribustesObject(t,e,i=[]){console.log("update attributes");for(let n of i)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=n.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);