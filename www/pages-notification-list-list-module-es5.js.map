{"version":3,"sources":["webpack:///src/app/pages/notification/list/list.page.html","webpack:///src/app/pages/notification/list/list-routing.module.ts","webpack:///src/app/pages/notification/list/list.module.ts","webpack:///src/app/pages/notification/list/list.page.scss","webpack:///src/app/pages/notification/list/list.page.ts"],"names":["routes","path","component","ListPageRoutingModule","imports","forChild","exports","ListPageModule","declarations","ListPage","request","userAuth","utilArray","navCtrl","notifications","firstLoading","notificationModel","userModel","user","init","$event","paginate","page","dataPaginate","current_page","api_functionModel","id","subscribe","console","log","counts_not","saveUser","response","not","push","target","complete","error","event","last_page","disabled","infiniteScroll","notification","listUpdate","navigateForward","route","selector","template"],"mappings":"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","file":"pages-notification-list-list-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"home/results\\\"></ion-back-button>    \\n    </ion-buttons>\\n    <ion-title>Notificaciones</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"init($event)\\\">\\n    <ion-refresher-content></ion-refresher-content>\\n  </ion-refresher>\\n\\n\\n  <ion-list>\\n\\n    <ion-list-header *ngIf=\\\"notifications.length == 0\\\"  color=\\\"light\\\">\\n      <ion-label>No posee notificaciones</ion-label>\\n    </ion-list-header>\\n \\n\\n      <app-notification\\n        *ngFor=\\\"let not of notifications\\\"  (click)=\\\"visibleNot(not)\\\" [class]=\\\"{'no-active' : not.isShow}\\\"\\n        style=\\\"width: 100%;\\\"\\n        [notification] = \\\"not\\\"\\n      ></app-notification>\\n\\n  </ion-list>\\n\\n  <ion-infinite-scroll threshold=\\\"100px\\\" (ionInfinite)=\\\"loadData($event)\\\">\\n    <ion-infinite-scroll-content\\n      loadingSpinner=\\\"bubbles\\\"\\n      loadingText=\\\"\\\">\\n    </ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ListPage } from './list.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ListPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ListPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ListPageRoutingModule } from './list-routing.module';\n\nimport { ListPage } from './list.page';\nimport {ComponentsModule} from '../../../components/components.module'\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ListPageRoutingModule,\n    ComponentsModule\n  ],\n  declarations: [ListPage]\n})\nexport class ListPageModule {}\n","export default \".no-active {\\n  --ion-background-color: #e9ebee !important;\\n}\\n\\n.date {\\n  font-size: x-small;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvbm90aWZpY2F0aW9uL2xpc3QvbGlzdC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSwwQ0FBQTtBQUNKOztBQUVBO0VBQ0ksa0JBQUE7QUFDSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL25vdGlmaWNhdGlvbi9saXN0L2xpc3QucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm5vLWFjdGl2ZXtcbiAgICAtLWlvbi1iYWNrZ3JvdW5kLWNvbG9yOiAjZTllYmVlICFpbXBvcnRhbnQ7XG59XG5cbi5kYXRle1xuICAgIGZvbnQtc2l6ZTogeC1zbWFsbDtcbn0iXX0= */\";","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { Model } from 'src/app/api/models/model';\nimport { RequestService } from 'src/app/api/request.service';\nimport { AuthUserService } from 'src/app/services/auth-user.service';\nimport { UtilArrayService } from 'src/app/services/util-array.service';\nimport { NavController, IonInfiniteScroll } from '@ionic/angular';\n\n@Component({\n  selector: 'app-list',\n  templateUrl: './list.page.html',\n  styleUrls: ['./list.page.scss'],\n})\nexport class ListPage implements OnInit {\n\n  @ViewChild(IonInfiniteScroll) infiniteScroll: IonInfiniteScroll;\n\n\n  public notifications = [];\n  public notificationModel : Model;\n  public userModel : Model;\n\n  firstLoading = true;\n  dataPaginate : any;\n\n  constructor(\n    public request : RequestService,\n    public userAuth : AuthUserService,\n    public utilArray : UtilArrayService,\n    public navCtrl : NavController\n  ) {\n    this.notificationModel = new Model('Notification',request);\n    this.userModel = new Model('User',request);\n   }\n\n  ngOnInit() {\n\n    this.notifications = this.userAuth.user.notifications ? this.userAuth.user.notifications : [] ;\n\n    this.init();\n  }\n\n\n  async init($event = null,paginate = false){\n\n    let page = {};\n    \n    if(paginate && this.dataPaginate ){\n      page = {\n        page : this.dataPaginate.current_page + 1\n      }\n    }\n\n    this.userModel.api_functionModel(this.userAuth.user.id , 'resetNotifications').subscribe(()=>{\n      console.log('restart count  notifications')\n      this.userAuth.user.counts_not = 0;\n      this.userAuth.saveUser();\n    })\n\n    \n    this.userModel.api_functionModel(this.userAuth.user.id ,'pageNotifications',page).subscribe(\n      response => {\n        console.log(response);\n\n        if(response['status'] == 'success'){\n          this.dataPaginate = response['data'];\n          if(!paginate){\n            this.notifications = response['data']['data']\n          }else{\n\n            for(let not of response['data']['data']){\n              this.notifications.push(not);\n            }\n            \n          }\n        }\n\n        if($event)\n          $event.target.complete();\n        \n        this.firstLoading = false;\n\n      },\n      error => {\n        console.log(error)\n        if($event)\n          $event.target.complete();\n      }\n    )\n  }\n\n  openModal(){\n\n  }\n\n  loadData(event) {\n    if(this.dataPaginate &&  this.dataPaginate.last_page == this.dataPaginate.current_page){\n      event.target.complete();\n      event.target.disabled = true;\n      this.infiniteScroll.disabled = !this.infiniteScroll.disabled;\n      return;\n    }\n\n    this.init(event,true);\n  }\n\n  visibleNot(not){\n    if(not.id)\n      this.notificationModel.api_functionModel(not.id,'viewed').subscribe(\n        (response)=>{\n          let notification = response['data'];\n          this.utilArray.listUpdate(this.notifications ,notification.id , notification);\n      })\n\n    this.navCtrl.navigateForward(not.route);\n  }\n\n}\n"]}