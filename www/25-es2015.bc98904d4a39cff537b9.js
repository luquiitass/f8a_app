(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"6/gD":function(t,e,i){"use strict";i.d(e,"a",(function(){return b}));var n=i("mrSG"),o=i("gcOT"),s=i("8xVP"),a=i("fXoL"),c=i("G/jy");const{Camera:r}=o.c;let b=(()=>{class t{constructor(t){this.photos=[],this.convertBlobToBase64=t=>new Promise((e,i)=>{const n=new FileReader;n.onerror=i,n.onload=()=>{e(n.result)},n.readAsDataURL(t)}),this.serviceImage=new s.a("Image",t)}init(t,e=!0,i="assets/images/pngwing.png"){this.url=null!=t?t:"/images/",this.thumb=null!=e&&e,this.path=i,this.photo=new l(i)}setImage(t){this.image=t,this.photo.image=t}addNewToGallery(){return Object(n.b)(this,void 0,void 0,(function*(){const t=yield r.getPhoto({resultType:o.a.Uri,source:o.b.Camera,quality:100}),e=yield this.readAsBase64(t);this.photos.unshift(new l(null,t.webPath,e,this.url,this.thumb))}))}addOneNewToGallery(){return Object(n.b)(this,void 0,void 0,(function*(){const t=yield r.getPhoto({resultType:o.a.Uri,source:o.b.Camera,quality:100}),e=yield this.readAsBase64(t);this.photo=new l(t.webPath,e,e,this.url,this.thumb,this.image)}))}isLoadPthoto(){return!!this.photo.data}readAsBase64(t){return Object(n.b)(this,void 0,void 0,(function*(){const e=yield fetch(t.webPath),i=yield e.blob();return yield this.convertBlobToBase64(i)}))}uploadImage(){if(this.isLoadPthoto())return this.photo.id?this.serviceImage.api_update(this.photo):this.serviceImage.api_create(this.photo)}}return t.\u0275fac=function(e){return new(e||t)(a.Ub(c.a))},t.\u0275prov=a.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class l{constructor(t="assets/images/pngwing.png",e=null,i="",n="",o=!1,s=null){this.id=s?s.id:"",this.webviewPath=e,this.filepath=t,this.data=i,this.url=n,this.thumb=o,this.image=s}getPath(){return this.webviewPath?this.webviewPath:this.image&&this.image.urlComplete?this.image.urlComplete:this.filepath}}},"7i0p":function(t,e,i){"use strict";i.r(e),i.d(e,"ListPageModule",(function(){return M}));var n=i("ofXK"),o=i("3Pt+"),s=i("TEn/"),a=i("tyNb"),c=i("mrSG"),r=i("PEpV"),b=i("8xVP"),l=i("wd/R"),u=i("fXoL"),d=i("G/jy"),m=i("vuFD"),g=i("2Rin"),h=i("rLe3");function f(t,e){if(1&t&&(u.Qb(0,"ion-segment-button",11),u.tc(1),u.Pb()),2&t){const t=e.$implicit,i=e.index,n=u.ac();u.gc("value",i),u.hc("id","sgm_",i,""),u.yb(1),u.vc(" ",n.util.setFormatMoment(t.date)," ")}}function p(t,e){1&t&&(u.Qb(0,"ion-list-header",12),u.Qb(1,"ion-label"),u.tc(2,"Sin registros"),u.Pb(),u.Pb())}const P=function(t){return["/admin/game/",t]};function v(t,e){if(1&t){const t=u.Rb();u.Qb(0,"ion-item"),u.Qb(1,"ion-grid"),u.Qb(2,"ion-row"),u.Qb(3,"ion-col",13),u.Qb(4,"ion-grid"),u.Qb(5,"ion-row"),u.Qb(6,"ion-col",14),u.tc(7),u.Pb(),u.Qb(8,"ion-col",15),u.tc(9),u.Pb(),u.Pb(),u.Qb(10,"ion-row"),u.Qb(11,"ion-col"),u.tc(12," Vs "),u.Pb(),u.Pb(),u.Qb(13,"ion-row"),u.Qb(14,"ion-col",14),u.tc(15),u.Pb(),u.Qb(16,"ion-col",15),u.tc(17),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(18,"ion-col",16),u.Qb(19,"ion-grid"),u.Qb(20,"ion-row"),u.Qb(21,"ion-col",17),u.Qb(22,"ion-button",18),u.Mb(23,"ion-icon",19),u.Pb(),u.Pb(),u.Qb(24,"ion-col",17),u.Qb(25,"ion-button",3),u.Yb("click",(function(){u.nc(t);const i=e.$implicit;return u.ac().showEdit(i)})),u.Mb(26,"ion-icon",20),u.Pb(),u.Pb(),u.Qb(27,"ion-col",17),u.Qb(28,"ion-button",3),u.Yb("click",(function(){u.nc(t);const i=e.$implicit;return u.ac().confirmDelete(i)})),u.Mb(29,"ion-icon",21),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb()}if(2&t){const t=e.$implicit;u.yb(1),u.Bb("status-",t.status,""),u.yb(6),u.vc(" ",t.team_l.name," "),u.yb(2),u.uc(t.l_goals),u.yb(6),u.vc(" ",t.team_v.name," "),u.yb(2),u.uc(t.v_goals),u.yb(5),u.fc("routerLink",u.ic(8,P,t.id))}}const y=[{path:"",component:(()=>{class t{constructor(t,e,i,n,o,s){this.request=t,this.dialogService=e,this.modalController=i,this.dialog=n,this.util=o,this.utilArray=s,this.games=[],this.tabs=[],this.gameService=new b.a("Game",t)}ngOnInit(){this.init()}init(t=null){this.gameService.api_function("pageAdminAll",{orderByColumns:"name",orderByDireccion:"des"}).subscribe(e=>{this.tabs=e.data.dates,this.selectTab(),console.log(e),t&&t.target.complete()},e=>{t&&t.target.completed()})}openModal(){return Object(c.b)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:r.a,componentProps:{date:this.tabs&&this.tabs[this.tabSelected]?this.tabs[this.tabSelected].date:""}});return t.onDidDismiss().then(t=>{console.log("crate game");const e=t.data.game;let i=this.tabs.map(t=>t.date).indexOf(e.date);i>=0||(i=this.tabs.length,this.tabs[i]={date:l(e.date).format("YYYY-MM-DD"),results:[]}),this.utilArray.listAddFirst(this.tabs[i].results,e)}),yield t.present()}))}showEdit(t){return Object(c.b)(this,void 0,void 0,(function*(){const e=yield this.modalController.create({component:r.a,componentProps:{id:t.id}});return e.onDidDismiss().then(t=>{const e=t.data.game;this.utilArray.listUpdate(this.games,e.id,e)}),yield e.present()}))}confirmDelete(t){this.dialog.presentAlertConfirm("Confirmar","Estas seguro de eliminar este game",e=>{this.delete(t)})}delete(t){this.gameService.api_delete(t.id).subscribe(e=>{console.log(e),"success"==e.status&&(this.dialog.showToast("Game Eliminado",null,"success"),this.utilArray.listDelete(this.games,t.id))})}showItem(t){console.log(t)}selectDate(t){let e=parseInt(t.detail.value),i=this.tabs[e];if(i.results)return this.games=i.results,void this.focusSegment();this.gameService.api_function("adminByDate",{date:i.date}).subscribe(t=>{"success"==t.status&&(this.tabs[e].results=t.data,this.games=this.tabs[e].results,this.focusSegment()),console.log(t)},t=>{console.error(t)})}focusSegment(){let t="sgm_"+this.tabSelected;console.log("select segment : ",t),document.getElementById(t).scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}delay(t){return new Promise(e=>setTimeout(e,t))}selectTab(){return Object(c.b)(this,void 0,void 0,(function*(){if(this.tabs.length>0){let t=l(),e=0;this.tabs.forEach((i,n)=>{l(i.date).isAfter(t)&&0==e&&(e=n)}),this.selectDate({detail:{value:e}}),this.tabSelected=e,yield this.util.delay(1500),this.focusSegment()}}))}}return t.\u0275fac=function(e){return new(e||t)(u.Lb(d.a),u.Lb(m.a),u.Lb(s.nb),u.Lb(m.a),u.Lb(g.a),u.Lb(h.a))},t.\u0275cmp=u.Fb({type:t,selectors:[["app-list"]],decls:20,vars:4,consts:[["slot","start"],["defaultHref","admin_home"],["slot","secondary"],[3,"click"],["name","add-outline"],["slot","fixed",3,"ionRefresh"],["size","12"],["scrollable","",3,"ngModel","ngModelChange","ionChange"],[3,"value","id",4,"ngFor","ngForOf"],["color","tertiary",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"value","id"],["color","tertiary"],["size","10"],["size","11"],["size","1"],["size","2"],["size-sm","4","size-xs","12"],[3,"routerLink"],["name","enter-outline"],["slot","icon-only","name","create-outline"],["name","trash-outline"]],template:function(t,e){1&t&&(u.Qb(0,"ion-header"),u.Qb(1,"ion-toolbar"),u.Qb(2,"ion-buttons",0),u.Mb(3,"ion-back-button",1),u.Pb(),u.Qb(4,"ion-title"),u.tc(5,"Partidos"),u.Pb(),u.Qb(6,"ion-buttons",2),u.Qb(7,"ion-button",3),u.Yb("click",(function(){return e.openModal()})),u.Mb(8,"ion-icon",4),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(9,"ion-content"),u.Qb(10,"ion-refresher",5),u.Yb("ionRefresh",(function(t){return e.init(t)})),u.Mb(11,"ion-refresher-content"),u.Pb(),u.Qb(12,"ion-list"),u.Qb(13,"ion-grid"),u.Qb(14,"ion-row"),u.Qb(15,"ion-col",6),u.Qb(16,"ion-segment",7),u.Yb("ngModelChange",(function(t){return e.tabSelected=t}))("ionChange",(function(t){return e.selectDate(t)})),u.sc(17,f,2,3,"ion-segment-button",8),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.sc(18,p,3,0,"ion-list-header",9),u.sc(19,v,30,10,"ion-item",10),u.Pb(),u.Pb()),2&t&&(u.yb(16),u.fc("ngModel",e.tabSelected),u.yb(1),u.fc("ngForOf",e.tabs),u.yb(1),u.fc("ngIf",0==e.games.length),u.yb(1),u.fc("ngForOf",e.games))},directives:[s.x,s.jb,s.j,s.f,s.g,s.hb,s.i,s.y,s.r,s.O,s.P,s.H,s.w,s.S,s.q,s.U,s.ub,o.d,o.g,n.j,n.k,s.V,s.I,s.G,s.D,s.tb,a.h],styles:[".status[_ngcontent-%COMP%], .team[_ngcontent-%COMP%]{width:100%}.team[_ngcontent-%COMP%]{display:inline}.goal-team[_ngcontent-%COMP%], .name-team[_ngcontent-%COMP%]{background-color:transparent}.names[_ngcontent-%COMP%]{width:80%}"]}),t})()}];let Q=(()=>{class t{}return t.\u0275mod=u.Jb({type:t}),t.\u0275inj=u.Ib({factory:function(e){return new(e||t)},imports:[[a.j.forChild(y)],a.j]}),t})(),M=(()=>{class t{}return t.\u0275mod=u.Jb({type:t}),t.\u0275inj=u.Ib({factory:function(e){return new(e||t)},imports:[[n.b,o.a,s.kb,Q]]}),t})()},PEpV:function(t,e,i){"use strict";i.d(e,"a",(function(){return v}));var n=i("mrSG"),o=i("8xVP"),s=i("rBWs"),a=i("fXoL"),c=i("G/jy"),r=i("vuFD"),b=i("TEn/"),l=i("6/gD"),u=i("3Pt+"),d=i("ofXK");function m(t,e){if(1&t&&(a.Qb(0,"ion-select-option",19),a.tc(1),a.Pb()),2&t){const t=e.$implicit;a.fc("value",t.id),a.yb(1),a.uc(t.name)}}function g(t,e){if(1&t&&(a.Qb(0,"ion-select-option",19),a.tc(1),a.Pb()),2&t){const t=e.$implicit;a.fc("value",t.id),a.yb(1),a.uc(t.name)}}function h(t,e){if(1&t){const t=a.Rb();a.Qb(0,"div"),a.Qb(1,"ion-item"),a.Qb(2,"ion-label",4),a.tc(3,"Otro Equipo"),a.Pb(),a.Qb(4,"ion-input",20),a.Yb("ngModelChange",(function(e){return a.nc(t),a.ac().game.other_team=e})),a.Pb(),a.Pb(),a.Qb(5,"div",7),a.tc(6),a.Pb(),a.Qb(7,"ion-button",21),a.Yb("click",(function(){return a.nc(t),a.ac().newTeam()})),a.tc(8,"Nuevo equipo"),a.Pb(),a.Pb()}if(2&t){const t=a.ac();a.yb(4),a.fc("ngModel",t.game.other_team),a.yb(2),a.uc(t.serviceGame.errorsForm.get("other_team"))}}function f(t,e){if(1&t&&(a.Qb(0,"ion-select-option",19),a.tc(1),a.Pb()),2&t){const t=e.$implicit;a.fc("value",t),a.yb(1),a.uc(t)}}function p(t,e){if(1&t&&(a.Qb(0,"ion-select-option",19),a.tc(1),a.Pb()),2&t){const t=e.$implicit;a.fc("value",t),a.yb(1),a.uc(t)}}function P(t,e){if(1&t&&(a.Qb(0,"ion-select-option",19),a.tc(1),a.Pb()),2&t){const t=e.$implicit;a.fc("value",t),a.yb(1),a.uc(t)}}let v=(()=>{class t{constructor(t,e,i,n,s,a){var c;this.request=t,this.dialogService=e,this.viewCtrl=i,this.photoService=n,this.modalController=a,this.teams=[],this.numbGoals=[],this.customDayShortNames=["s\xf8n"],this.status=["Pendiente","Suspendido","Jugado","Created"],this.myDateFilter=t=>6==t.getDay(),this.serviceGame=new o.a("Game",t),this.serviceTeam=new o.a("Team",t),this.id=s.get("id"),this.toDate=null!==(c=s.get("date"))&&void 0!==c?c:new Date,console.log("date",this.toDate)}ngOnInit(){this.serviceTeam.api_function("getAllTeamsSelect").subscribe(t=>{t.data&&(this.teams=t.data,console.log("teams -> ",this.teams))});for(var t=0;t<=30;t++)this.numbGoals.push(t);this.initObject()}initObject(){this.game={l_team:"",v_team:"",l_goals:0,v_goals:0,time:"15:00",date:this.toDate,location:"",description:"",status:"Pendiente"},this.id&&this.serviceGame.api_find(this.id).subscribe(t=>{"success"==t.status&&(this.game=t.Game)})}submit(){this.game.id?this.serviceGame.api_update(this.game).subscribe(t=>{var e;"success"==t.status&&(this.dialogService.showToast(null!==(e=t.msjSuccess)&&void 0!==e?e:"Registrado"),console.log(t),this.dismiss(t.Game))}):this.serviceGame.api_create(this.game).subscribe(t=>{var e;"success"==t.status&&(this.dialogService.showToast(null!==(e=t.msjSuccess)&&void 0!==e?e:"Registrado"),this.dismiss(t.Game))})}dismiss(t){this.viewCtrl.dismiss({game:t})}close(){this.viewCtrl.dismiss()}print(){console.log(this.game)}newTeam(){return Object(n.b)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:s.a});return t.onDidDismiss().then(t=>{t.data.team&&this.teams.push(t.data.team)}),yield t.present()}))}}return t.\u0275fac=function(e){return new(e||t)(a.Lb(c.a),a.Lb(r.a),a.Lb(b.nb),a.Lb(l.a),a.Lb(b.pb),a.Lb(b.nb))},t.\u0275cmp=a.Fb({type:t,selectors:[["app-game-form"]],decls:69,vars:22,consts:[["slot","start"],["color","dark",3,"click"],["name","arrow-back"],[3,"ngSubmit","keyup"],["position","floating"],["name","l_team",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[2,"color","red","padding-top","0.2rem"],["name","v_team",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"goals"],["name","l_goals",3,"ngModel","ngModelChange"],["name","v_goals",3,"ngModel","ngModelChange"],["displayFormat","HH:mm ","name","time",3,"ngModel","ngModelChange"],["type","text","name","location",3,"ngModel","ngModelChange"],["type","text","name","description",3,"ngModel","ngModelChange"],["name","date","displayFormat","YYYY-MM-DD",3,"ngModel","ngModelChange"],["name","status",3,"ngModel","ngModelChange"],["type","submit","expand","block"],[3,"value"],["type","text","name","other_team",3,"ngModel","ngModelChange"],["size","sm",3,"click"]],template:function(t,e){1&t&&(a.Qb(0,"ion-header"),a.Qb(1,"ion-toolbar"),a.Qb(2,"ion-title"),a.tc(3,"Partido"),a.Pb(),a.Qb(4,"ion-buttons",0),a.Qb(5,"ion-button",1),a.Yb("click",(function(){return e.close()})),a.Mb(6,"ion-icon",2),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Qb(7,"ion-content"),a.Qb(8,"form",3),a.Yb("ngSubmit",(function(){return e.submit()}))("keyup",(function(){return e.serviceGame.errorsForm.clear()})),a.Qb(9,"ion-item"),a.Qb(10,"ion-label",4),a.tc(11,"Equipo local"),a.Pb(),a.Qb(12,"ion-select",5),a.Yb("ngModelChange",(function(t){return e.game.l_team=t})),a.sc(13,m,2,2,"ion-select-option",6),a.Pb(),a.Qb(14,"div",7),a.tc(15),a.Pb(),a.Pb(),a.Qb(16,"ion-item"),a.Qb(17,"ion-label",4),a.tc(18,"Equipo Vicitante"),a.Pb(),a.Qb(19,"ion-select",8),a.Yb("ngModelChange",(function(t){return e.game.v_team=t})),a.sc(20,g,2,2,"ion-select-option",6),a.Pb(),a.Qb(21,"div",7),a.tc(22),a.Pb(),a.Pb(),a.sc(23,h,9,2,"div",9),a.Mb(24,"br"),a.Qb(25,"div",10),a.Qb(26,"ion-item"),a.Qb(27,"ion-label",4),a.tc(28,"Goles L"),a.Pb(),a.Qb(29,"ion-select",11),a.Yb("ngModelChange",(function(t){return e.game.l_goals=t})),a.sc(30,f,2,2,"ion-select-option",6),a.Pb(),a.Qb(31,"div",7),a.tc(32),a.Pb(),a.Pb(),a.Qb(33,"ion-item"),a.Qb(34,"ion-label",4),a.tc(35,"Goles V"),a.Pb(),a.Qb(36,"ion-select",12),a.Yb("ngModelChange",(function(t){return e.game.v_goals=t})),a.sc(37,p,2,2,"ion-select-option",6),a.Pb(),a.Qb(38,"div",7),a.tc(39),a.Pb(),a.Pb(),a.Pb(),a.Qb(40,"ion-item"),a.Qb(41,"ion-label"),a.tc(42,"HH:mm"),a.Pb(),a.Qb(43,"ion-datetime",13),a.Yb("ngModelChange",(function(t){return e.game.time=t})),a.Pb(),a.Pb(),a.Qb(44,"ion-item"),a.Qb(45,"ion-label",4),a.tc(46,"Lugar"),a.Pb(),a.Qb(47,"ion-input",14),a.Yb("ngModelChange",(function(t){return e.game.location=t})),a.Pb(),a.Pb(),a.Qb(48,"div",7),a.tc(49),a.Pb(),a.Qb(50,"ion-item"),a.Qb(51,"ion-label",4),a.tc(52,"Comentario"),a.Pb(),a.Qb(53,"ion-input",15),a.Yb("ngModelChange",(function(t){return e.game.description=t})),a.Pb(),a.Pb(),a.Qb(54,"div",7),a.tc(55),a.Pb(),a.Qb(56,"ion-item"),a.Qb(57,"ion-label"),a.tc(58,"Fecha"),a.Pb(),a.Qb(59,"ion-datetime",16),a.Yb("ngModelChange",(function(t){return e.game.date=t})),a.Pb(),a.Pb(),a.Qb(60,"ion-item"),a.Qb(61,"ion-label",4),a.tc(62,"Estado"),a.Pb(),a.Qb(63,"ion-select",17),a.Yb("ngModelChange",(function(t){return e.game.status=t})),a.sc(64,P,2,2,"ion-select-option",6),a.Pb(),a.Qb(65,"div",7),a.tc(66),a.Pb(),a.Pb(),a.Qb(67,"ion-button",18),a.tc(68,"Guardar"),a.Pb(),a.Pb(),a.Pb()),2&t&&(a.yb(12),a.fc("ngModel",e.game.l_team),a.yb(1),a.fc("ngForOf",e.teams),a.yb(2),a.uc(e.serviceGame.errorsForm.get("l_team")),a.yb(4),a.fc("ngModel",e.game.v_team),a.yb(1),a.fc("ngForOf",e.teams),a.yb(2),a.uc(e.serviceGame.errorsForm.get("v_team")),a.yb(1),a.fc("ngIf",e.game.other_team),a.yb(6),a.fc("ngModel",e.game.l_goals),a.yb(1),a.fc("ngForOf",e.numbGoals),a.yb(2),a.uc(e.serviceGame.errorsForm.get("l_goals")),a.yb(4),a.fc("ngModel",e.game.v_goals),a.yb(1),a.fc("ngForOf",e.numbGoals),a.yb(2),a.uc(e.serviceGame.errorsForm.get("v_goals")),a.yb(4),a.fc("ngModel",e.game.time),a.yb(4),a.fc("ngModel",e.game.location),a.yb(2),a.uc(e.serviceGame.errorsForm.get("location")),a.yb(4),a.fc("ngModel",e.game.description),a.yb(2),a.uc(e.serviceGame.errorsForm.get("description")),a.yb(4),a.fc("ngModel",e.game.date),a.yb(4),a.fc("ngModel",e.game.status),a.yb(1),a.fc("ngForOf",e.status),a.yb(2),a.uc(e.serviceGame.errorsForm.get("status")))},directives:[b.x,b.jb,b.hb,b.j,b.i,b.y,b.r,u.i,u.e,u.f,b.D,b.G,b.W,b.ub,u.d,u.g,d.j,d.k,b.s,b.C,b.vb,b.X],styles:[""]}),t})()},rLe3:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i("fXoL");let o=(()=>{class t{constructor(){}listAddLast(t,e){t.push(e)}listAddFirst(t,e){t.unshift(e)}listUpdate(t,e,i){let n=this.findIndexList(t,e);n>=0&&(t[n]=i)}listDelete(t,e){let i=this.findIndexList(t,e);i>=0&&t.splice(i,1)}findList(t,e){return t.find(t=>t.id===e)}findIndexList(t,e){return t.findIndex(t=>t.id===e)}updateAttribustesObject(t,e,i=[]){console.log("update attributes");for(let n of i)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=n.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);