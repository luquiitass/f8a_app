{"version":3,"sources":["./src/app/pages/login/login.page.html","./src/app/pages/login/login-routing.module.ts","./src/app/pages/login/login.module.ts","./src/app/pages/login/login.page.scss","./src/app/pages/login/login.page.ts"],"names":[],"mappings":"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","file":"pages-login-login-module.js","sourcesContent":["export default \"<ion-content class=\\\"ion-padding ion-align-items-center\\\">\\n    <ion-grid >\\n      <ion-row class=\\\"ion-justify-content-center\\\">\\n        <ion-col class=\\\"ion-align-self-center\\\"  size-xs=\\\"12\\\">\\n          <form #form=\\\"ngForm\\\" (ngSubmit)=\\\"login(form)\\\">\\n\\n            <div class=\\\"ion-text-center bg-l2 icon\\\">\\n\\n              <ion-img\\n                src=\\\"assets/icon/favicon.png\\\"\\n              ></ion-img>\\n\\n            </div>\\n            <div class=\\\"ion-padding\\\">\\n              <ion-item>\\n                <ion-input name=\\\"email\\\" type=\\\"email\\\" placeholder=\\\"ejemplo@gmail.com\\\" ngModel required></ion-input>\\n              </ion-item>\\n              <ion-item>\\n                <ion-input name=\\\"password\\\" type=\\\"password\\\" placeholder=\\\"Contraseña\\\" ngModel required></ion-input>\\n              </ion-item>\\n              \\n            </div>\\n            <div style=\\\"color: red; padding-top: 0.2rem\\\" >{{ authUserService.errorsLogin }}</div>\\n\\n            \\n\\n\\n            <div padding>\\n\\n              <div class=\\\"ion-text-center\\\"  >\\n                <ion-button  type=\\\"submit\\\" [disabled]=\\\"form.invalid\\\" [disabled]=\\\"loadingLogin\\\">\\n                  Iniciar Sesión\\n                  <ion-spinner name=\\\"lines\\\" *ngIf=\\\"loadingLogin\\\" ></ion-spinner>\\n                </ion-button>\\n              </div>\\n\\n              <div class=\\\"ion-text-center ion-margin-bottom ion-margin-top\\\">\\n                <a   color=\\\"secondary\\\" routerLink=\\\"/password-reset-email\\\" routerDirection=\\\"forward\\\" >¿Olvidaste tu contraseña?</a>\\n              </div>\\n              \\n\\n              <div class=\\\"ion-text-center ion-margin\\\">\\n                <ion-text >O puedes iniciar sesión con:</ion-text>\\n              </div>\\n\\n              <div class=\\\"ion-text-center\\\">\\n                <ion-button color=\\\"default\\\" style=\\\"background-color: #1976d2; color: white; display: none;\\\"  >\\n                  <ion-icon name=\\\"logo-facebook\\\"></ion-icon>\\n                </ion-button>\\n\\n                <ion-button color=\\\"default\\\" class=\\\"ion-padding-left ion-padding-right\\\" style=\\\"background-color: #c62828; color: white\\\" (click)=\\\"loginGoogle()\\\" [disabled]=\\\"loadingGoogle\\\">\\n                  <ion-icon name=\\\"logo-google\\\"></ion-icon>         \\n                  <ion-spinner name=\\\"lines\\\" *ngIf=\\\"loadingGoogle\\\" ></ion-spinner>      \\n                </ion-button>\\n              </div>\\n\\n              <div class=\\\"ion-text-center ion-margin-top rg\\\">\\n                <ion-text >\\n                  ¿Eres nuevo? <a  expand=\\\"block\\\" (click)=\\\"openModal()\\\">Regístrate</a>\\n                </ion-text>\\n              </div>\\n             \\n\\n            </div>\\n\\n\\n           \\n          </form>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPageRoutingModule } from './login-routing.module';\n\nimport { LoginPage } from './login.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LoginPageRoutingModule\n  ],\n  declarations: [LoginPage]\n})\nexport class LoginPageModule {}\n","export default \"ion-grid {\\n  height: 100%;\\n}\\n\\nion-row {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  height: 100%;\\n}\\n\\n.icon {\\n  max-width: 400px;\\n  border-radius: 70px;\\n  margin: auto;\\n}\\n\\n.rg {\\n  font-size: x-large;\\n  margin-top: 60px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvbG9naW4vbG9naW4ucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksWUFBQTtBQUNKOztBQUNBO0VBQ0ksYUFBQTtFQUNBLG1CQUFBO0VBQ0EsdUJBQUE7RUFDQSxZQUFBO0FBRUo7O0FBQ0E7RUFDSSxnQkFBQTtFQUNBLG1CQUFBO0VBQ0EsWUFBQTtBQUVKOztBQUNBO0VBQ0ksa0JBQUE7RUFDQSxnQkFBQTtBQUVKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvbG9naW4vbG9naW4ucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWdyaWR7XG4gICAgaGVpZ2h0OiAxMDAlO1xufVxuaW9uLXJvd3tcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgaGVpZ2h0OiAxMDAlO1xufVxuXG4uaWNvbntcbiAgICBtYXgtd2lkdGg6IDQwMHB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDcwcHg7XG4gICAgbWFyZ2luOiBhdXRvO1xufVxuXG4ucmd7XG4gICAgZm9udC1zaXplOiB4LWxhcmdlO1xuICAgIG1hcmdpbi10b3A6IDYwcHg7XG59Il19 */\";","import { Component, OnInit, HostListener } from '@angular/core';\n\nimport { AuthUserService } from 'src/app/services/auth-user.service';\nimport { ModalController, Platform } from '@ionic/angular';\nimport { UserFormPage } from '../user/user-form/user-form.page';\n\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport * as firebase from 'firebase/app';\nimport { fromEvent } from 'rxjs';\nimport { DialogService } from 'src/app/api/util/dialog.service';\nimport { UtilService } from 'src/app/services/util.service';\n\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n\n  public loadingLogin = false;\n  public loadingGoogle = false;\n\n  constructor(\n    public authUserService : AuthUserService,\n    public modalController: ModalController,\n    private afAuth: AngularFireAuth,\n    public platform : Platform,\n    public utilDialog : DialogService,\n    public util : UtilService\n\n  ) {\n   }\n\n  ngOnInit() {\n    this.authUserService.redirect();\n\n  }\n\n  googleAuth() {\n    /*this.googlePlus.login({})\n      .then(result => {\n        console.log(result);\n      })\n      .catch(err => console.log(`GoogleAuth Error`, JSON.stringify(err)));\n    //return this.AuthLogin(new firebase.auth.GoogleAuthProvider());\n    */\n  }\n\n\n  async login(form){\n    this.loadingLogin = true;\n    //await this.util.delay(500);\n    this.authUserService.login(form.value).finally(()=>{\n      this.loadingLogin = false;\n    });\n  }\n\n  async openModal() {\n    const modal = await this.modalController.create({\n      component: UserFormPage ,\n    });\n\n    modal.onDidDismiss().then(data=>{\n      //const user = data.data['user'];\n      //this.userService.listAddLast(user);\n    })\n\n    return await modal.present();\n   }\n\n   async loginGoogle() {\n    this.loadingGoogle = true;\n    try{\n      const res = await this.afAuth.signInWithPopup(new firebase.default.auth.GoogleAuthProvider());\n      \n\n      const user = res.user;\n\n      const data = {\n        email : user.email,\n        first_name : user.displayName.split(' ')[1],\n        last_name : user.displayName.split(' ')[0],\n        photoURL : user.photoURL\n      }\n      console.log(user);\n      console.log(data)\n\n      this.authUserService.loginSocial(data ).finally(()=>{\n        this.loadingGoogle = false;\n        console.log('loadingGoogle' , this.loadingGoogle)\n      })\n    //this.picture = user.photoURL;\n    //this.name = user.displayName;\n    //this.email = user.email;\n  }catch(e){\n    console.log(e);\n    this.loadingGoogle = false;\n    this.utilDialog.showToast('Error al iniciar sesión con Google',null,'danger')\n  }\n }\n\n}\n"],"sourceRoot":"webpack:///"}