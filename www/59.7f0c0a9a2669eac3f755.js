(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{"6/gD":function(t,e,o){"use strict";o.d(e,"a",(function(){return u}));var i=o("mrSG"),n=o("gcOT"),r=o("8xVP"),a=o("fXoL"),s=o("G/jy"),c=n.c.Camera,u=function(){function t(t){this.photos=[],this.convertBlobToBase64=function(t){return new Promise((function(e,o){var i=new FileReader;i.onerror=o,i.onload=function(){e(i.result)},i.readAsDataURL(t)}))},this.serviceImage=new r.a("Image",t)}return t.prototype.init=function(t,e,o){void 0===e&&(e=!0),void 0===o&&(o="assets/images/pngwing.png"),this.url=null!=t?t:"/images/",this.thumb=null!=e&&e,this.path=o,this.photo=new h(o)},t.prototype.setImage=function(t){this.image=t,this.photo.image=t},t.prototype.addNewToGallery=function(){return Object(i.b)(this,void 0,void 0,(function(){var t,e;return Object(i.d)(this,(function(o){switch(o.label){case 0:return[4,c.getPhoto({resultType:n.a.Uri,source:n.b.Camera,quality:100})];case 1:return t=o.sent(),[4,this.readAsBase64(t)];case 2:return e=o.sent(),this.photos.unshift(new h(null,t.webPath,e,this.url,this.thumb)),[2]}}))}))},t.prototype.addOneNewToGallery=function(){return Object(i.b)(this,void 0,void 0,(function(){var t,e;return Object(i.d)(this,(function(o){switch(o.label){case 0:return[4,c.getPhoto({resultType:n.a.Uri,source:n.b.Camera,quality:100})];case 1:return t=o.sent(),[4,this.readAsBase64(t)];case 2:return e=o.sent(),this.photo=new h(t.webPath,e,e,this.url,this.thumb,this.image),[2]}}))}))},t.prototype.isLoadPthoto=function(){return!!this.photo.data},t.prototype.readAsBase64=function(t){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(o){switch(o.label){case 0:return[4,fetch(t.webPath)];case 1:return[4,o.sent().blob()];case 2:return e=o.sent(),[4,this.convertBlobToBase64(e)];case 3:return[2,o.sent()]}}))}))},t.prototype.uploadImage=function(){if(this.isLoadPthoto())return this.photo.id?this.serviceImage.api_update(this.photo):this.serviceImage.api_create(this.photo)},t.\u0275fac=function(e){return new(e||t)(a.Ub(s.a))},t.\u0275prov=a.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),h=function(){function t(t,e,o,i,n,r){void 0===t&&(t="assets/images/pngwing.png"),void 0===e&&(e=null),void 0===o&&(o=""),void 0===i&&(i=""),void 0===n&&(n=!1),void 0===r&&(r=null),this.id=r?r.id:"",this.webviewPath=e,this.filepath=t,this.data=o,this.url=i,this.thumb=n,this.image=r}return t.prototype.getPath=function(){return this.webviewPath?this.webviewPath:this.image&&this.image.urlComplete?this.image.urlComplete:this.filepath},t}()},TUkU:function(t,e,o){"use strict";o.r(e),o.d(e,"Tab2PageModule",(function(){return p}));var i=o("TEn/"),n=o("ofXK"),r=o("3Pt+"),a=o("qtYk"),s=o("tyNb"),c=o("fXoL"),u=o("6/gD");function h(t,e){if(1&t&&(c.Qb(0,"ion-col",4),c.Mb(1,"ion-img",5),c.Pb()),2&t){var o=e.$implicit;c.yb(1),c.gc("src",o.webviewPath)}}var b=[{path:"",component:function(){function t(t){this.photoService=t}return t.prototype.addPhotoToGallery=function(){this.photoService.addNewToGallery()},t.\u0275fac=function(e){return new(e||t)(c.Lb(u.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-tab2"]],decls:11,vars:1,consts:[["size","6",4,"ngFor","ngForOf"],["vertical","bottom","horizontal","center","slot","fixed"],[3,"click"],["name","camera"],["size","6"],[3,"src"]],template:function(t,e){1&t&&(c.Qb(0,"ion-header"),c.Qb(1,"ion-toolbar"),c.Qb(2,"ion-title"),c.vc(3,"Photo Gallery"),c.Pb(),c.Pb(),c.Pb(),c.Qb(4,"ion-content"),c.Qb(5,"ion-grid"),c.Qb(6,"ion-row"),c.uc(7,h,2,1,"ion-col",0),c.Pb(),c.Pb(),c.Qb(8,"ion-fab",1),c.Qb(9,"ion-fab-button",2),c.Yb("click",(function(){return e.addPhotoToGallery()})),c.Mb(10,"ion-icon",3),c.Pb(),c.Pb(),c.Pb()),2&t&&(c.yb(7),c.gc("ngForOf",e.photoService.photos))},directives:[i.x,i.jb,i.hb,i.r,i.w,i.S,n.k,i.t,i.u,i.y,i.q,i.z],styles:[""]}),t}()}],l=function(){function t(){}return t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({factory:function(e){return new(e||t)},imports:[[s.j.forChild(b)],s.j]}),t}(),p=function(){function t(){}return t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({factory:function(e){return new(e||t)},imports:[[i.kb,n.b,r.a,a.a,l]]}),t}()}}]);