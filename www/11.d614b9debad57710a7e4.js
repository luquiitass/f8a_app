(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{BeZc:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var o=n("mrSG"),i=n("9suA"),a=n("8xVP"),r=n("Dwri"),c=n("fXoL"),s=n("TEn/"),l=n("ofXK"),b=n("G/jy"),u=n("vuFD"),d=n("3Pt+"),f=function(e){function t(t,n,o,i,r){var c=e.call(this,o,n)||this;return c.navParms=t,c.modalController=n,c.requestService=i,c.dialogService=r,c.team_id=t.get("team_id"),c.amountOfTheMonth=t.get("amount_of_the_month"),c.modelBalanceSheet=new a.a("BalanceSheet",i),c}return Object(o.c)(t,e),t.prototype.initObject=function(){this.balanceSheet={user:"",user_id:"",balance:0,team_id:this.team_id,balance_start:0}},t.prototype.submit=function(){return Object(o.b)(this,void 0,void 0,(function(){var e=this;return Object(o.d)(this,(function(t){switch(t.label){case 0:return[4,this.dialogService.loadingProgres()];case 1:return t.sent(),console.log("submit"),this.modelBalanceSheet.api_create(this.balanceSheet).subscribe((function(t){e.dialogService.dimissLoaging(),"success"==t.status&&e.dimiss(t.BalanceSheet)}),(function(t){e.dialogService.dimissLoaging()}),(function(){e.dialogService.dimissLoaging()})),[2]}}))}))},t.prototype.dimiss=function(e){this.modalController.dismiss({balanceSheet:e})},t.prototype.close=function(){this.modalController.dismiss()},t.prototype.log=function(e){console.log(e)},t.prototype.addUser=function(e){return void 0===e&&(e=null),Object(o.b)(this,void 0,void 0,(function(){var t,n=this;return Object(o.d)(this,(function(o){switch(o.label){case 0:return e&&e.preventDefault(),console.log("Add admins"),[4,this.modalController.create({component:r.a,componentProps:{cancellable:!1,model:"User",function:"searchUser",multiple:!1,textSearch:"Nombre o email",listSelect:[]}})];case 1:return(t=o.sent()).onDidDismiss().then((function(e){if(e.data&&e.data.item){var t=e.data.item;n.balanceSheet.user=t.text,n.balanceSheet.user_id=t.id}})),[4,t.present()];case 2:return[2,o.sent()]}}))}))},t.\u0275fac=function(e){return new(e||t)(c.Lb(s.pb),c.Lb(s.nb),c.Lb(l.n),c.Lb(b.a),c.Lb(u.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-form-balance-sheet"]],features:[c.vb],decls:57,vars:8,consts:[["slot","start"],["color","dark",3,"click"],["name","arrow-back"],[3,"ngSubmit","keyup"],["position","floating"],["type","text","name","user",3,"ngModel","ngModelChange","click"],[2,"color","red","padding-top","0.2rem"],["type","text","name","balance_start",3,"ngModel","ngModelChange"],[1,"ion-text-center"],[1,"value"],["type","submit","expand","block"]],template:function(e,t){1&e&&(c.Qb(0,"ion-header"),c.Qb(1,"ion-toolbar"),c.Qb(2,"ion-title"),c.vc(3,"Nuevo Jugador"),c.Pb(),c.Qb(4,"ion-buttons",0),c.Qb(5,"ion-button",1),c.Yb("click",(function(){return t.close()})),c.Mb(6,"ion-icon",2),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(7,"ion-content"),c.Qb(8,"ion-card"),c.Qb(9,"ion-card-content"),c.Qb(10,"form",3),c.Yb("ngSubmit",(function(){return t.submit()}))("keyup",(function(){return t.modelBalanceSheet.errorsForm.clear()})),c.Qb(11,"ion-item"),c.Qb(12,"ion-label",4),c.vc(13,"Usuario"),c.Pb(),c.Qb(14,"ion-input",5),c.Yb("ngModelChange",(function(e){return t.balanceSheet.user=e}))("click",(function(e){return t.addUser(e)})),c.Pb(),c.Pb(),c.Qb(15,"div",6),c.vc(16),c.Pb(),c.Mb(17,"br"),c.Qb(18,"ion-item"),c.Qb(19,"ion-label",4),c.vc(20,"Saldo"),c.Pb(),c.Qb(21,"ion-input",7),c.Yb("ngModelChange",(function(e){return t.balanceSheet.balance_start=e})),c.Pb(),c.Pb(),c.Qb(22,"div"),c.vc(23,"A este saldo se le restara el monto del mes actual. Ej: si el saldo es "),c.Qb(24,"b"),c.vc(25,"-300"),c.Pb(),c.vc(26," y la cuota es de "),c.Qb(27,"b"),c.vc(28),c.Pb(),c.vc(29,", entonces el saldo ser\xe1 "),c.Qb(30,"b"),c.vc(31,"-800"),c.Pb(),c.Pb(),c.Qb(32,"div",6),c.vc(33),c.Pb(),c.Mb(34,"br"),c.Qb(35,"div"),c.Qb(36,"ion-row",8),c.Qb(37,"ion-col"),c.Qb(38,"ion-label"),c.vc(39,"Saldo:"),c.Pb(),c.Mb(40,"br"),c.Qb(41,"ion-label",9),c.vc(42),c.Pb(),c.Pb(),c.Qb(43,"ion-col"),c.Qb(44,"ion-label"),c.vc(45,"Valor cuota:"),c.Pb(),c.Mb(46,"br"),c.Qb(47,"ion-label",9),c.vc(48),c.Pb(),c.Pb(),c.Qb(49,"ion-col"),c.Qb(50,"ion-label"),c.vc(51,"Total:"),c.Pb(),c.Mb(52,"br"),c.Qb(53,"ion-label",9),c.vc(54),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(55,"ion-button",10),c.vc(56,"Guardar"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&e&&(c.yb(14),c.gc("ngModel",t.balanceSheet.user),c.yb(2),c.wc(t.modelBalanceSheet.errorsForm.get("user_id")),c.yb(5),c.gc("ngModel",t.balanceSheet.balance_start),c.yb(7),c.wc(t.amountOfTheMonth),c.yb(5),c.wc(t.modelBalanceSheet.errorsForm.get("balance_start")),c.yb(9),c.wc(t.balanceSheet.balance_start),c.yb(6),c.wc(t.amountOfTheMonth),c.yb(6),c.wc(t.balanceSheet.balance_start-t.amountOfTheMonth))},directives:[s.x,s.jb,s.hb,s.j,s.i,s.y,s.r,s.k,s.l,d.i,d.e,d.f,s.D,s.G,s.C,s.vb,d.d,d.g,s.S,s.q],styles:[".value[_ngcontent-%COMP%]{font-size:xx-large;font-weight:400}"]}),t}(i.a)},eLz6:function(e,t,n){"use strict";n.r(t),n.d(t,"BalanceSheetPageModule",(function(){return _}));var o=n("ofXK"),i=n("3Pt+"),a=n("TEn/"),r=n("tyNb"),c=n("mrSG"),s=n("8xVP"),l=n("BeZc"),b=n("fXoL"),u=n("G/jy"),d=n("vuFD"),f=n("y/q6"),h=n("rLe3"),p=function(){function e(){}return e.prototype.transform=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(void 0===e)return null;var o=e.sort((function(e,t){var n=e.user.completeName.toLowerCase(),o=t.user.completeName.toLowerCase();return n<o?-1:n>o?1:0}));return"pending"==t[0]?o.filter((function(e){return e.total<0})):"upToDate"==t[0]?o.filter((function(e){return e.total>=0})):o},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=b.Kb({name:"sortByUser",type:e,pure:!0}),e}();function m(e,t){if(1&e){var n=b.Rb();b.Qb(0,"ion-item"),b.Qb(1,"ion-label",16),b.vc(2,"Filtro"),b.Pb(),b.Qb(3,"ion-select",17),b.Yb("ngModelChange",(function(e){return b.oc(n),b.ac(2).filter=e})),b.Qb(4,"ion-select-option",18),b.vc(5,"Todos"),b.Pb(),b.Qb(6,"ion-select-option",19),b.vc(7,"Pendientes"),b.Pb(),b.Qb(8,"ion-select-option",20),b.vc(9,"Al d\xeda"),b.Pb(),b.Pb(),b.Pb()}if(2&e){var o=b.ac(2);b.yb(3),b.gc("ngModel",o.filter)}}function g(e,t){if(1&e){var n=b.Rb();b.Qb(0,"ion-row",21),b.Yb("click",(function(){b.oc(n);var e=t.$implicit;return b.ac(2).showOptions(e)})),b.Qb(1,"ion-col",22),b.vc(2),b.Pb(),b.Qb(3,"ion-col",23),b.vc(4),b.Pb(),b.Qb(5,"ion-col",24),b.Mb(6,"ion-icon",25),b.Pb(),b.Mb(7,"ion-ripple-effect"),b.Pb()}if(2&e){var o=t.$implicit;b.yb(2),b.wc(o.user.completeName),b.yb(2),b.wc(o.total)}}function v(e,t){1&e&&(b.Qb(0,"ion-row"),b.Qb(1,"ion-col",26),b.vc(2,"Debes a\xf1adir usuarios"),b.Pb(),b.Pb())}function P(e,t){if(1&e){var n=b.Rb();b.Qb(0,"ion-content"),b.Qb(1,"div"),b.Qb(2,"div",6),b.vc(3),b.Pb(),b.Pb(),b.Qb(4,"div",7),b.Qb(5,"div",8),b.Qb(6,"ion-button",9),b.Yb("click",(function(){return b.oc(n),b.ac().updateAmount()})),b.vc(7),b.Qb(8,"span",10),b.vc(9,"*Mes"),b.Pb(),b.Pb(),b.Pb(),b.Qb(10,"ion-text",11),b.vc(11," Presiona el monto para modificar el valor "),b.Pb(),b.Pb(),b.Mb(12,"br"),b.uc(13,m,10,1,"ion-item",5),b.Qb(14,"ion-grid"),b.Qb(15,"ion-row",12),b.Qb(16,"ion-col",13),b.vc(17,"Nombre"),b.Pb(),b.Qb(18,"ion-col",14),b.vc(19,"Saldo"),b.Pb(),b.Pb(),b.uc(20,g,8,2,"ion-row",15),b.bc(21,"sortByUser"),b.uc(22,v,3,0,"ion-row",5),b.Pb(),b.Pb()}if(2&e){var o=b.ac();b.yb(3),b.xc(" ",o.team.name," "),b.yb(4),b.xc(" $ ",o.team.amount_balance," "),b.yb(6),b.gc("ngIf",o.filter),b.yb(7),b.gc("ngForOf",b.dc(21,5,o.team.balance_sheets,o.filter)),b.yb(2),b.gc("ngIf",0==o.team.balance_sheets.length)}}var y=[{path:"",component:function(){function e(e,t,n,o,i,a,r,c){this.route=e,this.router=t,this.requestService=n,this.dialogService=o,this.authUser=i,this.modalController=a,this.utilArray=r,this.actionSheetController=c,this.filter="",this.modelBalanceSheet=new s.a("BalanceSheet",n),this.modelTeam=new s.a("Team",n),this.modelAmountTeam=new s.a("AmountTeam",n),this.team_id=this.route.snapshot.paramMap.get("team_id"),this.filter=this.route.snapshot.paramMap.get("filter")}return e.prototype.ngOnInit=function(){this.init()},e.prototype.init=function(){return Object(c.b)(this,void 0,void 0,(function(){var e,t=this;return Object(c.d)(this,(function(n){switch(n.label){case 0:return[4,this.dialogService.loadingProgres()];case 1:return n.sent(),e={},this.route.snapshot.queryParamMap.get("pending")&&(e.pending=1),this.modelTeam.api_functionModel(this.team_id,"pageBalanceSheet",e).subscribe((function(e){"success"==e.status&&(t.team=e.data),t.dialogService.dimissLoaging()}),(function(e){t.dialogService.dimissLoaging()})),[2]}}))}))},e.prototype.updateAmount=function(){return Object(c.b)(this,void 0,void 0,(function(){var e,t=this;return Object(c.d)(this,(function(n){switch(n.label){case 0:return(e=prompt("Ingrese el nuevo valor",this.team.amount_balance))?[4,this.dialogService.loadingProgres("Modificando moto")]:[3,2];case 1:n.sent(),this.modelAmountTeam.api_create({price:e,team_id:this.team_id}).subscribe((function(n){"success"==n.status&&(t.team.amount_balance=e),t.dialogService.dimissLoaging()}),(function(e){t.dialogService.dimissLoaging()})),n.label=2;case 2:return[2]}}))}))},e.prototype.add=function(){return Object(c.b)(this,void 0,void 0,(function(){var e,t=this;return Object(c.d)(this,(function(n){switch(n.label){case 0:return[4,this.modalController.create({component:l.a,componentProps:{team_id:this.team_id,amount_of_the_month:this.team.amount_balance}})];case 1:return(e=n.sent()).onDidDismiss().then((function(e){e.data&&e.data.balanceSheet&&t.utilArray.listAddFirst(t.team.balance_sheets,e.data.balanceSheet)})),[4,e.present()];case 2:return[2,n.sent()]}}))}))},e.prototype.showOptions=function(e){return Object(c.b)(this,void 0,void 0,(function(){var t,n=this;return Object(c.d)(this,(function(o){switch(o.label){case 0:return(t=[]).push({text:"Pagar",icon:"cash",handler:function(){console.log("Cancel clicked"),n.paid(e)}}),t.push({text:"Ver meses",icon:"calendar",handler:function(){console.log("Ver meses clicked"),n.router.navigateByUrl("/balance-sheet/months/"+e.id)}}),t.push({text:"Ver Pagos",icon:"wallet",handler:function(){console.log("Ver meses clicked"),n.router.navigateByUrl("/balance-sheet/payments/"+e.id)}}),t.push({text:"Eliminar",role:"destructive",icon:"trash",handler:function(){n.deleteBalanceSheet(e),console.log("Delete clicked")}}),t.push({text:"Cancelar",icon:"close",role:"cancel",handler:function(){console.log("Cancel clicked")}}),[4,this.actionSheetController.create({header:"Operaciones de : "+e.user.completeName,cssClass:"my-custom-class",buttons:t})];case 1:return[4,o.sent().present()];case 2:return o.sent(),[2]}}))}))},e.prototype.deleteBalanceSheet=function(e){return Object(c.b)(this,void 0,void 0,(function(){var t=this;return Object(c.d)(this,(function(n){switch(n.label){case 0:return[4,this.dialogService.loadingProgres("Eliminando..")];case 1:return n.sent(),this.modelBalanceSheet.api_delete(e.id).subscribe((function(n){t.dialogService.dimissLoaging(),t.utilArray.listDelete(t.team.balance_sheets,e.id)}),(function(e){t.dialogService.dimissLoaging()})),[2]}}))}))},e.prototype.paid=function(e){return Object(c.b)(this,void 0,void 0,(function(){var t,n=this;return Object(c.d)(this,(function(o){switch(o.label){case 0:return t=prompt("Monto a pagar","0"),parseInt(t)>0&&confirm("Estas seguro de realizar el pago de "+t+" para "+e.user.completeName)?[4,this.dialogService.loadingProgres("registrando pago...")]:[3,2];case 1:o.sent(),this.modelBalanceSheet.api_functionModel(e.id,"addPayment",{amount:t}).subscribe((function(t){n.dialogService.dimissLoaging(),"success"==t.status&&n.utilArray.listUpdate(n.team.balance_sheets,e.id,t.data),console.log("response addPayment",t)}),(function(e){n.dialogService.dimissLoaging()})),o.label=2;case 2:return[2]}}))}))},e.\u0275fac=function(t){return new(t||e)(b.Lb(r.a),b.Lb(r.g),b.Lb(u.a),b.Lb(d.a),b.Lb(f.a),b.Lb(a.nb),b.Lb(h.a),b.Lb(a.a))},e.\u0275cmp=b.Fb({type:e,selectors:[["app-balance-sheet"]],decls:10,vars:2,consts:[["slot","start"],[3,"defaultHref"],["slot","end"],[3,"click"],["name","person-add-outline"],[4,"ngIf"],[1,"team_name","ion-text-center"],[1,"ion-text-center"],[1,"amount_balance"],[1,"btn",3,"click"],[1,"x-mes"],[1,"text-hp"],[1,"bg-l1"],["size","9"],["size","2"],["class","row-table ion-activatable ripple-parent",3,"click",4,"ngFor","ngForOf"],["position","floating"],["name","v_team","interface","action-sheet",3,"ngModel","ngModelChange"],["value","all"],["value","pending"],["value","upToDate"],[1,"row-table","ion-activatable","ripple-parent",3,"click"],["size","9",1,"border-right"],["size","2",1,"border-right","ion-text-right"],["size","1"],["name","ellipsis-vertical-outline"],[1,"none","ion-text-center","active"]],template:function(e,t){1&e&&(b.Qb(0,"ion-header"),b.Qb(1,"ion-toolbar"),b.Qb(2,"ion-buttons",0),b.Mb(3,"ion-back-button",1),b.Pb(),b.Qb(4,"ion-title"),b.vc(5,"Balamce de Cuotas"),b.Pb(),b.Qb(6,"ion-buttons",2),b.Qb(7,"ion-button",3),b.Yb("click",(function(){return t.add()})),b.Mb(8,"ion-icon",4),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.uc(9,P,23,8,"ion-content",5)),2&e&&(b.yb(3),b.ic("defaultHref","/team/profile/",t.team_id,""),b.yb(6),b.gc("ngIf",t.team))},directives:[a.x,a.jb,a.j,a.f,a.g,a.hb,a.i,a.y,o.l,a.r,a.eb,a.w,a.S,a.q,o.k,a.D,a.G,a.W,a.ub,i.d,i.g,a.X,a.Q],pipes:[p],styles:[".team_name[_ngcontent-%COMP%]{margin:5px;padding:10px;font-size:x-large;background-color:rgba(80,251,140,.5803921568627451)}.btn[_ngcontent-%COMP%]{font-size:xx-large}.text-hp[_ngcontent-%COMP%]{font-size:small;color:#c7cacc}.op[_ngcontent-%COMP%]{font-size:x-small}.row-table[_ngcontent-%COMP%]{padding-top:10px;font-size:large;border-bottom:1px solid hsla(0,0%,100%,.6392156862745098)}.ripple-parent[_ngcontent-%COMP%]{position:relative;overflow:hidden}.border-right[_ngcontent-%COMP%]{border-right:1px solid hsla(0,0%,100%,.6392156862745098)}.border-left[_ngcontent-%COMP%]{border-left:1px solid hsla(0,0%,100%,.6392156862745098)}.x-mes[_ngcontent-%COMP%]{font-size:large}"]}),e}()},{path:"form-balance-sheet",loadChildren:function(){return n.e(62).then(n.bind(null,"UKxq")).then((function(e){return e.FormBalanceSheetPageModule}))}}],Q=function(){function e(){}return e.\u0275mod=b.Jb({type:e}),e.\u0275inj=b.Ib({factory:function(t){return new(t||e)},imports:[[r.j.forChild(y)],r.j]}),e}(),S=function(){function e(){}return e.\u0275mod=b.Jb({type:e}),e.\u0275inj=b.Ib({factory:function(t){return new(t||e)},imports:[[o.b]]}),e}(),_=function(){function e(){}return e.\u0275mod=b.Jb({type:e}),e.\u0275inj=b.Ib({factory:function(t){return new(t||e)},imports:[[o.b,i.a,a.kb,Q,S]]}),e}()},rLe3:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n("mrSG"),i=n("fXoL"),a=function(){function e(){}return e.prototype.listAddLast=function(e,t){e.push(t)},e.prototype.listAddFirst=function(e,t){e.unshift(t)},e.prototype.listUpdate=function(e,t,n){var o=this.findIndexList(e,t);o>=0&&(e[o]=n)},e.prototype.listDelete=function(e,t){var n=this.findIndexList(e,t);n>=0&&e.splice(n,1)},e.prototype.findList=function(e,t){return e.find((function(e){return e.id===t}))},e.prototype.findIndexList=function(e,t){return e.findIndex((function(e){return e.id===t}))},e.prototype.updateAttribustesObject=function(e,t,n){var i,a;void 0===n&&(n=[]),console.log("update attributes");try{for(var r=Object(o.h)(n),c=r.next();!c.done;c=r.next()){var s=c.value;t.hasOwnProperty(s)&&(e[s]=t[s])}}catch(l){i={error:l}}finally{try{c&&!c.done&&(a=r.return)&&a.call(r)}finally{if(i)throw i.error}}return e},e.\u0275prov=i.Hb({token:e,factory:e.\u0275fac=function(t){return new(t||e)},providedIn:"root"}),e}()}}]);