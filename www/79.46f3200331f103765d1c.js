(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{"+q+I":function(t,e,n){"use strict";n.r(e),n.d(e,"PlayersPageModule",(function(){return g}));var a=n("ofXK"),r=n("3Pt+"),i=n("TEn/"),o=n("tyNb"),s=n("mrSG"),l=n("8xVP"),c=n("fXoL"),u=n("G/jy"),d=n("2Rin"),f=n("WBL6"),p=n("pa2R"),b=[{path:"",component:function(){function t(t,e,n,a){this.request=t,this.navCtrl=e,this.util=n,this.reloadGlobal=a,this.players=[],this.firstLoading=!0,this.oldPlayers=[],this.playerModel=new l.a("Player",this.request)}return t.prototype.ngOnInit=function(){var t=this;this.load(),this.reloadGlobal.data$.subscribe((function(e){console.log("Reload player by select category"),t.load()}))},t.prototype.load=function(t,e){var n=this;void 0===t&&(t=null),void 0===e&&(e=!1);var a={};e&&this.dataPaginate&&(a={page:this.dataPaginate.current_page+1}),this.playerModel.api_function("pageHomePlayers",a).subscribe((function(a){var r,i;if("success"==a.status)if(n.dataPaginate=a.data,e)try{for(var o=Object(s.h)(a.data.data),l=o.next();!l.done;l=o.next())n.players.push(l.value)}catch(c){r={error:c}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}else n.players=a.data.data;n.oldPlayers=Object(s.f)(n.players),console.log(a),n.firstLoading=!1,t&&t.target.complete()}),(function(e){n.firstLoading=!1,console.error(e),t&&t.target.complete()}))},t.prototype.loadData=function(t){if(this.dataPaginate&&this.dataPaginate.last_page==this.dataPaginate.current_page)return t.target.complete(),t.target.disabled=!0,void(this.infiniteScroll.disabled=!this.infiniteScroll.disabled);this.load(t,!0)},t.prototype.playerSelect=function(t){console.log("goTo",t),this.navCtrl.navigateForward("player/profile/"+t.id)},t.prototype.searchPlayer=function(t){return Object(s.b)(this,void 0,void 0,(function(){var e,n=this;return Object(s.d)(this,(function(a){return console.log("text search",t),(e=t.target.value).length<=2?(this.players=this.oldPlayers,[2]):(this.firstLoading=!0,this.playerModel.api_function("searchPlayer",{query:e}).subscribe((function(e){console.log(e),"success"==e.status&&(n.players=e.data,t.target.autofocus=!0),n.firstLoading=!1}),(function(t){console.error(t),n.firstLoading=!1})),[2])}))}))},t.prototype.cancelSearch=function(t){this.players=this.oldPlayers},t.\u0275fac=function(e){return new(e||t)(c.Lb(u.a),c.Lb(i.ob),c.Lb(d.a),c.Lb(f.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-players"]],viewQuery:function(t,e){var n;1&t&&c.zc(i.A,!0),2&t&&c.kc(n=c.Zb())&&(e.infiniteScroll=n.first)},decls:11,vars:2,consts:[["slot","fixed",3,"ionRefresh"],["placeholder","Buscar jugador","debounce","500",3,"keyup","ionClear"],[3,"items","firstLoading","eventSelect"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText",""]],template:function(t,e){1&t&&(c.Qb(0,"ion-header"),c.Qb(1,"ion-toolbar"),c.Qb(2,"ion-title"),c.vc(3,"players"),c.Pb(),c.Pb(),c.Pb(),c.Qb(4,"ion-content"),c.Qb(5,"ion-refresher",0),c.Yb("ionRefresh",(function(t){return e.load(t)})),c.Mb(6,"ion-refresher-content"),c.Pb(),c.Qb(7,"ion-searchbar",1),c.Yb("keyup",(function(t){return e.searchPlayer(t)}))("ionClear",(function(t){return e.cancelSearch(t)})),c.Pb(),c.Qb(8,"app-player-list",2),c.Yb("eventSelect",(function(t){return e.playerSelect(t)})),c.Pb(),c.Qb(9,"ion-infinite-scroll",3),c.Yb("ionInfinite",(function(t){return e.loadData(t)})),c.Mb(10,"ion-infinite-scroll-content",4),c.Pb(),c.Pb()),2&t&&(c.yb(8),c.gc("items",e.players)("firstLoading",e.firstLoading))},directives:[i.x,i.jb,i.hb,i.r,i.O,i.P,i.T,i.vb,p.a,i.A,i.B],styles:[""]}),t}()}],h=function(){function t(){}return t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({factory:function(e){return new(e||t)},imports:[[o.j.forChild(b)],o.j]}),t}(),y=n("j1ZV"),g=function(){function t(){}return t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({factory:function(e){return new(e||t)},imports:[[a.b,r.a,i.kb,h,y.a]]}),t}()}}]);