(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{"+q+I":function(t,e,i){"use strict";i.r(e),i.d(e,"PlayersPageModule",(function(){return y}));var a=i("ofXK"),r=i("3Pt+"),n=i("TEn/"),s=i("tyNb"),o=i("mrSG"),l=i("8xVP"),c=i("fXoL"),d=i("G/jy"),u=i("2Rin"),b=i("pa2R");const h=[{path:"",component:(()=>{class t{constructor(t,e,i){this.request=t,this.navCtrl=e,this.util=i,this.players=[],this.firstLoading=!0,this.oldPlayers=[],this.playerModel=new l.a("Player",this.request)}ngOnInit(){this.load()}load(t=null,e=!1){return Object(o.b)(this,void 0,void 0,(function*(){let i={};e&&this.dataPaginate&&(i={page:this.dataPaginate.current_page+1}),this.playerModel.api_function("pageHomePlayers",i).subscribe(i=>{if("success"==i.status)if(this.dataPaginate=i.data,e)for(let t of i.data.data)this.players.push(t);else this.players=i.data.data;this.oldPlayers=[...this.players],console.log(i),this.firstLoading=!1,t&&t.target.complete()},e=>{this.firstLoading=!1,console.error(e),t&&t.target.complete()})}))}loadData(t){if(this.dataPaginate&&this.dataPaginate.last_page==this.dataPaginate.current_page)return t.target.complete(),t.target.disabled=!0,void(this.infiniteScroll.disabled=!this.infiniteScroll.disabled);this.load(t,!0)}playerSelect(t){console.log("goTo",t),this.navCtrl.navigateForward("player/profile/"+t.id)}searchPlayer(t){return Object(o.b)(this,void 0,void 0,(function*(){console.log("text search",t);let e=t.target.value;e.length<=2?this.players=this.oldPlayers:(this.firstLoading=!0,this.playerModel.api_function("searchPlayer",{query:e}).subscribe(e=>{console.log(e),"success"==e.status&&(this.players=e.data,t.target.autofocus=!0),this.firstLoading=!1},t=>{console.error(t),this.firstLoading=!1}))}))}cancelSearch(t){this.players=this.oldPlayers}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(d.a),c.Lb(n.ob),c.Lb(u.a))},t.\u0275cmp=c.Fb({type:t,selectors:[["app-players"]],viewQuery:function(t,e){var i;1&t&&c.xc(n.A,!0),2&t&&c.jc(i=c.Zb())&&(e.infiniteScroll=i.first)},decls:11,vars:2,consts:[["slot","fixed",3,"ionRefresh"],["placeholder","Buscar jugador","debounce","500",3,"keyup","ionClear"],[3,"items","firstLoading","eventSelect"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText",""]],template:function(t,e){1&t&&(c.Qb(0,"ion-header"),c.Qb(1,"ion-toolbar"),c.Qb(2,"ion-title"),c.tc(3,"players"),c.Pb(),c.Pb(),c.Pb(),c.Qb(4,"ion-content"),c.Qb(5,"ion-refresher",0),c.Yb("ionRefresh",(function(t){return e.load(t)})),c.Mb(6,"ion-refresher-content"),c.Pb(),c.Qb(7,"ion-searchbar",1),c.Yb("keyup",(function(t){return e.searchPlayer(t)}))("ionClear",(function(t){return e.cancelSearch(t)})),c.Pb(),c.Qb(8,"app-player-list",2),c.Yb("eventSelect",(function(t){return e.playerSelect(t)})),c.Pb(),c.Qb(9,"ion-infinite-scroll",3),c.Yb("ionInfinite",(function(t){return e.loadData(t)})),c.Mb(10,"ion-infinite-scroll-content",4),c.Pb(),c.Pb()),2&t&&(c.yb(8),c.fc("items",e.players)("firstLoading",e.firstLoading))},directives:[n.x,n.jb,n.hb,n.r,n.O,n.P,n.T,n.vb,b.a,n.A,n.B],styles:[""]}),t})()}];let p=(()=>{class t{}return t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({factory:function(e){return new(e||t)},imports:[[s.j.forChild(h)],s.j]}),t})();var f=i("j1ZV");let y=(()=>{class t{}return t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({factory:function(e){return new(e||t)},imports:[[a.b,r.a,n.kb,p,f.a]]}),t})()}}]);