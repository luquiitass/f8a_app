{"version":3,"sources":["webpack:///src/app/pages/game/game/game.page.html","webpack:///src/app/pages/game/game/game-routing.module.ts","webpack:///src/app/pages/game/game/game.module.ts","webpack:///src/app/pages/game/game/game.page.scss","webpack:///src/app/pages/game/game/game.page.ts"],"names":["routes","path","component","GamePageRoutingModule","imports","forChild","exports","GamePageModule","declarations","GamePage","route","requesService","util","dialogService","modalController","router","navCtrl","listsHomeService","authUser","shareService","firstLoading","id","snapshot","paramMap","get","gameModel","init","analyzeParameters","event","loadingProgres","api_functionModel","subscribe","data","game","isFinish","target","complete","dimissLoaging","error","create","componentProps","modal","onDidDismiss","then","remove","navigateByUrl","present","dateString","date","time","dateEnable","add","now","Date","isAfter","presentAlertConfirm","e","api_delete","console","log","showToast","navigateRoot","reload","queryParamMap","isAdminGame","isAdmin","selector","template"],"mappings":"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","file":"pages-game-game-game-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>Partido</ion-title>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/home/games\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-buttons slot=\\\"secondary\\\" >\\n      \\n      <ion-button (click)=\\\"shareService.shareGameFacebook(id)\\\" style=\\\"background: #4267B2      \\\">\\n        <ion-icon name=\\\"share-social-outline\\\"></ion-icon>\\n        <ion-icon name=\\\"logo-facebook\\\"></ion-icon>\\n      </ion-button>\\n      \\n      <ion-button (click)=\\\"confirmDelete()\\\" *ngIf=\\\"isAdminTeam\\\">\\n        <ion-icon name=\\\"trash-outline\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  \\n  <div class=\\\"game\\\" *ngIf=\\\"game\\\" >\\n    \\n    \\n    <app-game-list\\n      [game] = \\\"game\\\">\\n    </app-game-list>\\n\\n    <div class=\\\"ion-text-center\\\" *ngIf=\\\"game.status == 'Pendiente' && isFinish() && isAdminTeam\\\">\\n      <ion-button (click)=\\\"addResult()\\\">Añadir resultado</ion-button>\\n    </div>\\n\\n\\n    <div class=\\\"ion-text-center\\\">\\n      <ion-badge color=\\\"tertiary\\\">{{game.status}}</ion-badge>\\n    </div>\\n   \\n\\n    <ion-card *ngIf=\\\"game.location\\\">\\n      <ion-card-header>\\n        <ion-card-subtitle>Ubicación</ion-card-subtitle>\\n        <ion-card-title>{{game.location}}</ion-card-title>\\n      </ion-card-header>\\n    </ion-card>\\n\\n    <div *ngIf=\\\"game && game.field_id\\\">\\n      <div class=\\\"ub\\\">\\n        Ubicación\\n      </div>\\n        <app-show-map\\n          [field]=\\\"game.field\\\"\\n          [showDirection]=\\\"true\\\"\\n        ></app-show-map>\\n    </div>\\n\\n    <app-old-next-game\\n      [game]=\\\"game.oldGame\\\"\\n    ></app-old-next-game>\\n   \\n   \\n    <app-comments\\n      [idRelation]=\\\"id\\\"\\n      [nameRelationModel]=\\\"'Game'\\\"\\n    ></app-comments>\\n\\n  </div>\\n\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { GamePage } from './game.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: GamePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class GamePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { GamePageRoutingModule } from './game-routing.module';\n\nimport { GamePage } from './game.page';\nimport {ComponentsModule} from '../../../components/components.module'\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    GamePageRoutingModule,\n    ComponentsModule\n  ],\n  declarations: [GamePage]\n})\nexport class GamePageModule {}\n","export default \".ub {\\n  margin: 5px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvZ2FtZS9nYW1lL2dhbWUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksV0FBQTtBQUNKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvZ2FtZS9nYW1lL2dhbWUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnVie1xuICAgIG1hcmdpbjogNXB4O1xufSJdfQ== */\";","import { Component, OnInit } from '@angular/core';\n\nimport { ActivatedRouteSnapshot, ActivatedRoute, Router } from '@angular/router';\nimport { Model } from 'src/app/api/models/model';\nimport { RequestService } from 'src/app/api/request.service';\nimport { UtilService } from 'src/app/services/util.service';\nimport { DialogService } from 'src/app/api/util/dialog.service';\nimport { ModalController, NavController } from '@ionic/angular';\nimport { AddResultPage } from '../add-result/add-result.page';\nimport * as moment from 'moment';\nimport { ListsHomeService } from 'src/app/services/lists-home.service';\nimport { AuthUserService } from 'src/app/services/auth-user.service';\nimport { SharerService } from 'src/app/services/sharer.service';\n\n \n\n\n\n@Component({\n  selector: 'app-game',\n  templateUrl: './game.page.html',\n  styleUrls: ['./game.page.scss','../../home/games/games.page.scss'],\n})\nexport class GamePage implements OnInit {\n\n  public id : any;\n  public gameModel : Model;\n  public game : any ;\n  private firstLoading = true;\n\n\n  constructor(\n    public route : ActivatedRoute,\n    public requesService : RequestService,\n    public util : UtilService,\n    public dialogService : DialogService, \n    public modalController : ModalController,\n    private router : Router,\n    public navCtrl : NavController,\n    public listsHomeService : ListsHomeService,\n    public authUser : AuthUserService,\n    public shareService : SharerService\n\n  ) {\n    this.id = this.route.snapshot.paramMap.get('id');\n    this.gameModel = new Model('Game',requesService);\n\n   }\n\n  ngOnInit() {\n    this.init();\n    this.analyzeParameters();\n  }\n\n  async init(event = null){\n\n    if(this.firstLoading){\n      await this.dialogService.loadingProgres();\n      this.firstLoading = false;\n    }\n    this.gameModel.api_functionModel(this.id,'dataProfile').subscribe(data => {\n      if(data['status'] == 'success')\n        this.game = data['data'];\n      //console.log('Game',this.game);\n      this.isFinish();\n      if(event)\n        event.target.complete();\n      this.dialogService.dimissLoaging();\n    },\n    error =>{\n      this.dialogService.dimissLoaging(); \n    })\n  }\n\n  async addResult(){\n    const modal = await this.modalController.create({\n      component: AddResultPage,\n      componentProps : {\n        game : this.game\n      }\n    })\n\n    modal.onDidDismiss().then(data => {\n      if(data.data['game']){\n        this.game = this.game;\n        this.listsHomeService.remove('games',this.game.id);\n        this.router.navigateByUrl('results/profile/' + this.game.id)\n      }\n    })\n\n\n    await modal.present();\n  }\n\n\n  isFinish(){\n    let dateString = `${this.game.date} ${this.game.time}`;\n    \n    let dateEnable = moment(dateString).add(2,'hours');\n    let now = new Date();\n\n    return moment(now).isAfter(dateEnable) \n      \n  }\n\n  confirmDelete(){\n    this.dialogService.presentAlertConfirm('Confirmar','Estas seguro de eliminar este game',e => {\n      this.delete()\n    });\n   }\n\n   delete(){\n     this.gameModel.api_delete(this.game.id).subscribe(data => {\n       console.log(data);\n       if(data['status'] == 'success'){\n         this.dialogService.showToast('Partido Eliminado',null,'success');\n         //this.router.navigateByUrl('/home/games',{ replaceUrl: true });\n         //window.location.assign('#/home/games')\n         this.listsHomeService.remove('games',this.game.id);\n         this.navCtrl.navigateRoot('/home/games');\n         //this.gameService.listDelete(game.id);\n         //this.utilArray.listDelete(this.games,game.id)\n         \n       }\n     });\n   }\n\n\n   analyzeParameters(){\n     let reload = this.route.snapshot.queryParamMap.get('reload');\n     console.log('reload:',reload)\n   }\n  \n   get isAdminTeam(){\n    return this.authUser.isAdminGame(this.game) || this.authUser.isAdmin();\n  }\n\n \n\n}\n"]}